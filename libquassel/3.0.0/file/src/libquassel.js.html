<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/libquassel.js | libquassel</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Javascript lib to connect and interact with Quassel IRC core"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="libquassel"><meta property="twitter:description" content="Javascript lib to connect and interact with Quassel IRC core"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/alias.js~AliasItem.html">AliasItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/buffer.js~IRCBuffer.html">IRCBuffer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/buffer.js~IRCBufferCollection.html">IRCBufferCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/buffer.js~IRCBufferUser.html">IRCBufferUser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/bufferview.js~BufferView.html">BufferView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/identity.js~Identity.html">Identity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ignore.js~IgnoreItem.html">IgnoreItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ignore.js~IgnoreList.html">IgnoreList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/libquassel.js~Client.html">Client</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/message.js~IRCMessage.html">IRCMessage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/network.js~Network.html">Network</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/network.js~NetworkCollection.html">NetworkCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/network.js~Server.html">Server</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/request.js~Core.html">Core</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/user.js~IRCUser.html">IRCUser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/websocket.js~WebSocketStream.html">WebSocketStream</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-toArray">toArray</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-toCoreObject">toCoreObject</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Types">Types</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-IgnoreTypes">IgnoreTypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ScopeTypes">ScopeTypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Serializable">Serializable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-StrictnessTypes">StrictnessTypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EventEmitter">EventEmitter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Features">Features</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Flags">Flags</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-HighlightModes">HighlightModes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Types">Types</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ConnectionStates">ConnectionStates</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Types">Types</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-BufferInfo">BufferInfo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:aliases">Event:aliases</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.activate">Event:buffer.activate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.backlog">Event:buffer.backlog</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.deactivate">Event:buffer.deactivate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.lastseen">Event:buffer.lastseen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.markerline">Event:buffer.markerline</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.merge">Event:buffer.merge</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.message">Event:buffer.message</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.read">Event:buffer.read</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.remove">Event:buffer.remove</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.rename">Event:buffer.rename</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.addnewbuffersautomatically">Event:bufferview.addnewbuffersautomatically</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.allowedbuffertypes">Event:bufferview.allowedbuffertypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.bufferhidden">Event:bufferview.bufferhidden</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.bufferunhide">Event:bufferview.bufferunhide</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.bufferviewname">Event:bufferview.bufferviewname</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.disabledecoration">Event:bufferview.disabledecoration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.hideinactivebuffers">Event:bufferview.hideinactivebuffers</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.hideinactivenetworks">Event:bufferview.hideinactivenetworks</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.ids">Event:bufferview.ids</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.init">Event:bufferview.init</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.minimumactivity">Event:bufferview.minimumactivity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.networkid">Event:bufferview.networkid</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.orderchanged">Event:bufferview.orderchanged</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.search">Event:bufferview.search</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.update">Event:bufferview.update</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:channel.addusermode">Event:channel.addusermode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:channel.join">Event:channel.join</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:channel.removeusermode">Event:channel.removeusermode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:channel.topic">Event:channel.topic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:coreinfo">Event:coreinfo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:coreinfoinit">Event:coreinfoinit</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:error">Event:error</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:identities.init">Event:identities.init</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:identity">Event:identity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:identity.new">Event:identity.new</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:identity.remove">Event:identity.remove</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:ignorelist">Event:ignorelist</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:init">Event:init</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:login">Event:login</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:loginfailed">Event:loginfailed</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.addbuffer">Event:network.addbuffer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.adduser">Event:network.adduser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.autoidentify.password">Event:network.autoidentify.password</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.autoidentify.service">Event:network.autoidentify.service</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.autoreconnect.interval">Event:network.autoreconnect.interval</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.autoreconnect.retries">Event:network.autoreconnect.retries</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.codec.decoding">Event:network.codec.decoding</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.codec.encoding">Event:network.codec.encoding</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.codec.server">Event:network.codec.server</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.connected">Event:network.connected</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.connectionstate">Event:network.connectionstate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.disconnected">Event:network.disconnected</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.identity">Event:network.identity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.init">Event:network.init</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.latency">Event:network.latency</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.messagerate.burstsize">Event:network.messagerate.burstsize</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.messagerate.delay">Event:network.messagerate.delay</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.messagerate.unlimited">Event:network.messagerate.unlimited</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.mynick">Event:network.mynick</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.networkname">Event:network.networkname</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.new">Event:network.new</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.perform">Event:network.perform</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.rejoinchannels">Event:network.rejoinchannels</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.remove">Event:network.remove</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.sasl.account">Event:network.sasl.account</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.sasl.password">Event:network.sasl.password</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.server">Event:network.server</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.serverlist">Event:network.serverlist</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.unlimitedreconnectretries">Event:network.unlimitedreconnectretries</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.usecustommessagerate">Event:network.usecustommessagerate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.userrenamed">Event:network.userrenamed</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.usesasl">Event:network.usesasl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:setup">Event:setup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:setupfailed">Event:setupfailed</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:setupok">Event:setupok</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:unhandled">Event:unhandled</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:user.away">Event:user.away</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:user.part">Event:user.part</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:user.quit">Event:user.quit</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:user.realname">Event:user.realname</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-loginCallback">loginCallback</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;BufferId&gt;">UserType&lt;BufferId&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;BufferInfo&gt;">UserType&lt;BufferInfo&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;Identity&gt;">UserType&lt;Identity&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;IdentityId&gt;">UserType&lt;IdentityId&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;Message&gt;">UserType&lt;Message&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;MsgId&gt;">UserType&lt;MsgId&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;Network::Server&gt;">UserType&lt;Network::Server&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;NetworkId&gt;">UserType&lt;NetworkId&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;NetworkId&gt;">UserType&lt;NetworkId&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;NetworkInfo&gt;">UserType&lt;NetworkInfo&gt;</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/libquassel.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/*
 * libquassel
 * https://github.com/magne4000/node-libquassel
 *
 * Copyright (c) 2017 Jo&#xEB;l Charles
 * Licensed under the MIT license.
 */

import &apos;./usertypes&apos;; // register usertypes first
const { EventEmitter } = require(&apos;events&apos;);
const logger = require(&apos;debug&apos;)(&apos;libquassel:main&apos;);

import { Types as RequestTypes, Core } from &apos;./request&apos;;
import { NetworkCollection } from &apos;./network&apos;;
import { IRCBuffer } from &apos;./buffer&apos;;
import IRCUser from &apos;./user&apos;;
import Identity from &apos;./identity&apos;;
import BufferView from &apos;./bufferview&apos;;
import { Types as MessageTypes, HighlightModes } from &apos;./message&apos;;
import * as alias from &apos;./alias&apos;;
import * as ignore from &apos;./ignore&apos;;

/**
 * @type {Object}
 * @property {number} Features.SYNCHRONIZEDMARKERLINE
 * @property {number} Features.SASLAUTHENTICATION
 * @property {number} Features.SASLEXTERNAL
 * @property {number} Features.HIDEINACTIVENETWORKS
 * @property {number} Features.PASSWORDCHANGE
 * @property {number} Features.CAPNEGOTIATION
 * @property {number} Features.VERIFYSERVERSSL
 * @property {number} Features.CUSTOMRATELIMITS
 * @property {number} Features.NUMFEATURES
 */
export const Features = {
  SYNCHRONIZEDMARKERLINE: 0x0001,
  SASLAUTHENTICATION: 0x0002,
  SASLEXTERNAL: 0x0004,
  HIDEINACTIVENETWORKS: 0x0008,
  PASSWORDCHANGE: 0x0010,
  CAPNEGOTIATION: 0x0020, // IRCv3 capability negotiation, account tracking
  VERIFYSERVERSSL: 0x0040, // IRC server SSL validation
  CUSTOMRATELIMITS: 0x0080, // IRC server custom message rate limits
  NUMFEATURES: 0x0080
};

/**
 * @typedef {function(user: string, password: string)} loginCallback
 */

/**
 * Main class to interact with Quassel instance
 * @example
 * import { Client } from &apos;libquassel&apos;;
 * const net = require(&apos;net&apos;);
 *
 * const quassel = new Client(function(next) {
 *   next(&quot;user&quot;, &quot;password&quot;);
 * });
 * const socket = net.createConnection({
 *   host: &quot;localhost&quot;,
 *   port: 4242
 * });
 *
 * quassel.connect(socket);
 */
export class Client extends EventEmitter {
  /**
   * @param {function(next: loginCallback)} loginCallback
   * @param {Object} [options] Allows optionnal parameters
   * @param {number} [options.initialbackloglimit=options.backloglimit] number of backlogs to request per buffer at connection
   * @param {number} [options.backloglimit=100] number of backlogs to request per buffer after connection
   * @param {boolean} [options.securecore=true] Use SSL to connect to the core (if the core allows it)
   * @param {number} [options.highlightmode=0x02] Choose how highlights on nicks works. Defaults to only highlight a message if current nick is present.
   */
  constructor(loginCallback, options = {}) {
    super();
    /** @type {Object} options */
    this.options = {};
    this.options.backloglimit = parseInt(options.backloglimit || 100, 10);
    this.options.initialbackloglimit = parseInt(options.initialbackloglimit || this.options.backloglimit, 10);
    this.options.highlightmode = (typeof options.highlightmode === &apos;number&apos;) ? options.highlightmode : HighlightModes.CURRENTNICK;
    this.options.securecore = options.securecore !== false;
    /** @type {Core} */
    this.core = new Core(this.options);
    /** @type {NetworkCollection} */
    this.networks = new NetworkCollection();
    /** @type {Map&lt;number, Identity&gt;} */
    this.identities = new Map();
    /** @type {IgnoreList} */
    this.ignoreList = new ignore.IgnoreList();
    /** @type {AliasItem[]} */
    this.aliases = [];
    /** @type {Map&lt;number, BufferView&gt;} */
    this.bufferViews = new Map();
    /** @type {?number} */
    this.heartbeatInterval = null;
    /** @type {boolean} */
    this.useCompression = false;
    /** @type {?boolean} */
    this.connected = null;
    /** @type {?Object} */
    this.coreInfo = null;
    /** @type {?Object} */
    this.coreData = null;
    /** @type {function(next: loginCallback)} */
    this.loginCallback = loginCallback;

    if (typeof loginCallback !== &apos;function&apos;) {
      throw new Error(&apos;loginCallback parameter is mandatory and must be a function&apos;);
    }

    this.core.on(&apos;data&apos;, data =&gt; this.dispatch(data));
  }

  /**
   * Handles quasselcore messages that possesses a `MsgType` attribute
   * @param {Object} obj
   * @emits {Event:coreinfoinit}
   * @emits {Event:login}
   * @emits {Event:loginfailed}
   * @emits {Event:network.addbuffer}
   * @emits {Event:init}
   * @emits {Event:setup}
   * @emits {Event:setupok}
   * @emits {Event:setupfailed}
   * @emits {Event:identities.init}
   * @emits {Event:unhandled}
   * @protected
   */
  handleMsgType(obj) {
    switch (obj.MsgType) {
    case &apos;ClientInitAck&apos;:
      this.handleClientInitAck(obj);
      break;
    case &apos;ClientLoginAck&apos;:
      logger(&apos;Logged in&apos;);
      this.emit(&apos;login&apos;);
      break;
    case &apos;ClientLoginReject&apos;:
      logger(&apos;ClientLoginReject: %O&apos;, obj);
      this.emit(&apos;loginfailed&apos;);
      break;
    case &apos;CoreSetupAck&apos;:
      logger(&apos;Core setup successful&apos;);
      this.emit(&apos;setupok&apos;);
      break;
    case &apos;CoreSetupReject&apos;:
      logger(&apos;Core setup failed: %O&apos;, obj.Error);
      this.emit(&apos;setupfailed&apos;, obj.Error);
      break;
    case &apos;SessionInit&apos;:
      this.handleSessionInit(obj);
      break;
    default:
      logger(&apos;Unhandled MsgType %s&apos;, obj.MsgType);
      this.emit(&apos;unhandled&apos;, obj);
    }
  }

  /**
   * @protected
   */
  handleClientInitAck(obj) {
    this.coreInfo = obj;
    this.emit(&apos;coreinfoinit&apos;, obj);
    if (!obj.Configured) {
      this.core.finishClientInit(() =&gt; this.emit(&apos;setup&apos;, obj.StorageBackends));
    } else if (obj.LoginEnabled) {
      this.core.finishClientInit(() =&gt; this.login());
    } else {
      this.emit(&apos;error&apos;, new Error(&apos;Your core is not supported&apos;));
    }
  }

  /**
   * @protected
   */
  handleSessionInit(obj) {
    this.emit(&apos;init&apos;, obj);
    // Init networks
    for (let networkId of obj.SessionState.NetworkIds) {
      // Save network list
      this.networks.add(networkId);
      this.core.sendInitRequest(&apos;Network&apos;, String(networkId));
    }
    // Attach buffers to network
    for (let bufferInfo of obj.SessionState.BufferInfos) {
      const ircbuffer = new IRCBuffer(bufferInfo);
      this.networks.get(ircbuffer.network).buffers.add(ircbuffer);
      if (ircbuffer.isChannel) {
        this.core.sendInitRequest(&apos;IrcChannel&apos;, `${ircbuffer.network}/${ircbuffer.name}`);
      }
      this.emit(&apos;network.addbuffer&apos;, ircbuffer.network, bufferInfo.id);
      // Init backlogs for this buffer
      if (this.options.initialbackloglimit &gt; 0) {
        this.core.backlog(bufferInfo.id);
      }
    }
    // Init Identities
    for (let identity of obj.SessionState.Identities) {
      this.identities.set(identity.identityId, new Identity(identity));
    }
    this.emit(&apos;identities.init&apos;, this.identities);
    this.core.sendInitRequest(&apos;BufferSyncer&apos;);
    this.core.sendInitRequest(&apos;BufferViewManager&apos;);
    this.core.sendInitRequest(&apos;IgnoreListManager&apos;);
    this.core.sendInitRequest(&apos;AliasManager&apos;);
    this.heartbeatInterval = setInterval(() =&gt; this.core.heartBeat(), 30000);
  }

  /**
   * Returns `true` if the core supports the given feature
   * @example
   * quassel.supports(Features.PASSWORDCHANGE);
   * @param {number} feature
   * @returns {boolean}
   */
  supports(feature) {
    return (this.coreInfo.CoreFeatures &amp; feature) &gt; 0;
  }

  /**
   * Dispatch quasselcore messages
   * @param {Object} obj
   * @protected
   */
  dispatch(obj) {
    if (obj === null) {
      logger(&apos;Received null object ... ?&apos;);
    } else if (obj.MsgType !== undefined) {
      this.handleMsgType(obj);
    } else if (Array.isArray(obj)) {
      this.handleStruct(obj);
    } else {
      logger(&apos;Unknown message: %O&apos;, obj);
    }
  }

  /**
   * @protected
   */
  handleInitDataNetwork(id, data) {
    id = parseInt(id, 10);
    const network = this.networks.get(id);
    network.update(data);
    return network;
  }

  /**
   * Handles most of the quasselcore messages
   * @param {*} obj - quasselcore message decoded by qtdatasteam
   * @emits {Event:coreinfo}
   * @emits {Event:network.init}
   * @emits {Event:network.latency}
   * @emits {Event:network.connectionstate}
   * @emits {Event:network.addbuffer}
   * @emits {Event:network.connected}
   * @emits {Event:network.disconnected}
   * @emits {Event:network.userrenamed}
   * @emits {Event:network.mynick}
   * @emits {Event:network.networkname}
   * @emits {Event:network.server}
   * @emits {Event:network.serverlist}
   * @emits {Event:network.adduser}
   * @emits {Event:network.new}
   * @emits {Event:network.remove}
   * @emits {Event:network.codec.decoding}
   * @emits {Event:network.codec.encoding}
   * @emits {Event:network.codec.server}
   * @emits {Event:network.perform}
   * @emits {Event:network.identity}
   * @emits {Event:network.autoreconnect.interval}
   * @emits {Event:network.autoreconnect.retries}
   * @emits {Event:network.autoidentify.service}
   * @emits {Event:network.autoidentify.password}
   * @emits {Event:network.unlimitedreconnectretries}
   * @emits {Event:network.usesasl}
   * @emits {Event:network.sasl.account}
   * @emits {Event:network.sasl.password}
   * @emits {Event:network.rejoinchannels}
   * @emits {Event:network.usecustommessagerate}
   * @emits {Event:network.messagerate.unlimited}
   * @emits {Event:network.messagerate.delay}
   * @emits {Event:network.messagerate.burstsize}
   * @emits {Event:buffer.read}
   * @emits {Event:buffer.lastseen}
   * @emits {Event:buffer.markerline}
   * @emits {Event:buffer.remove}
   * @emits {Event:buffer.rename}
   * @emits {Event:buffer.merge}
   * @emits {Event:buffer.deactivate}
   * @emits {Event:buffer.activate}
   * @emits {Event:buffer.backlog}
   * @emits {Event:buffer.message}
   * @emits {Event:bufferview.ids}
   * @emits {Event:bufferview.bufferunhide}
   * @emits {Event:bufferview.bufferhidden}
   * @emits {Event:bufferview.orderchanged}
   * @emits {Event:bufferview.init}
   * @emits {Event:bufferview.networkid}
   * @emits {Event:bufferview.search}
   * @emits {Event:bufferview.hideinactivenetworks}
   * @emits {Event:bufferview.hideinactivebuffers}
   * @emits {Event:bufferview.allowedbuffertypes}
   * @emits {Event:bufferview.addnewbuffersautomatically}
   * @emits {Event:bufferview.minimumactivity}
   * @emits {Event:bufferview.bufferviewname}
   * @emits {Event:bufferview.disabledecoration}
   * @emits {Event:bufferview.update}
   * @emits {Event:user.part}
   * @emits {Event:user.quit}
   * @emits {Event:user.away}
   * @emits {Event:user.realname}
   * @emits {Event:channel.join}
   * @emits {Event:channel.addusermode}
   * @emits {Event:channel.removeusermode}
   * @emits {Event:channel.topic}
   * @emits {Event:ignorelist}
   * @emits {Event:identity}
   * @emits {Event:identity.new}
   * @emits {Event:identity.remove}
   * @emits {Event:aliases}
   * @protected
   */
  handleStruct(obj) {
    const [ requesttype ] = obj;
    let className, id, functionName, data;
    switch (requesttype) {
    case RequestTypes.SYNC:
      [ , className, id, functionName, ...data ] = obj;
      this.handleStructSync(className.toString(), id, functionName.toString(), data);
      break;
    case RequestTypes.RPCCALL:
      [ , functionName, ...data ] = obj;
      this.handleStructRpcCall(functionName.toString(), data);
      break;
    case RequestTypes.INITDATA:
      [ , className, id, ...data ] = obj;
      this.handleStructInitData(className.toString(), id, data);
      break;
    case RequestTypes.HEARTBEAT:
      logger(&apos;HeartBeat&apos;);
      this.core.heartBeat(true);
      break;
    case RequestTypes.HEARTBEATREPLY:
      logger(&apos;HeartBeatReply&apos;);
      break;
    default:
      logger(&apos;Unhandled RequestType #%s&apos;, requesttype);
    }
  }

  /**
   * @protected
   */
  handleStructSync(className, id, functionName, data) {
    let networkId, username, buffername;
    switch (className) {
    case &apos;Network&apos;:
      return this.handleStructSyncNetwork(parseInt(id.toString(), 10), functionName, data);
    case &apos;BufferSyncer&apos;:
      return this.handleStructSyncBufferSyncer(functionName, data);
    case &apos;BufferViewManager&apos;:
      return this.handleStructSyncBufferViewManager(functionName, data);
    case &apos;BufferViewConfig&apos;:
      return this.handleStructSyncBufferViewConfig(parseInt(id.toString(), 10), functionName, data);
    case &apos;IrcUser&apos;:
      [ networkId, username ] = splitOnce(id, &apos;/&apos;);
      return this.handleStructSyncIrcUser(parseInt(networkId, 10), username, functionName, data);
    case &apos;IrcChannel&apos;:
      [ networkId, buffername ] = splitOnce(id, &apos;/&apos;);
      return this.handleStructSyncIrcChannel(parseInt(networkId, 10), buffername, functionName, data);
    case &apos;BacklogManager&apos;:
      return this.handleStructSyncBacklogManager(functionName, data);
    case &apos;IgnoreListManager&apos;:
      return this.handleStructSyncIgnoreListManager(functionName, data);
    case &apos;Identity&apos;:
      return this.handleStructSyncIdentity(parseInt(id, 10), functionName, data);
    case &apos;AliasManager&apos;:
      return this.handleStructSyncAliasManager(functionName, data);
    default:
      logger(&apos;Unhandled Sync %s&apos;, className);
    }
  }

  /**
   * @protected
   */
  handleStructRpcCall(functionName, data) {
    switch (functionName) {
    case &apos;2displayStatusMsg(QString,QString)&apos;:
      // Even official client doesn&apos;t use this ...
      break;
    case &apos;2displayMsg(Message)&apos;:
      this.handleStructRpcCallDisplayMsg(data);
      break;
    case &apos;__objectRenamed__&apos;:
      this.handleStructRpcCall__objectRenamed__(data);
      break;
    case &apos;2networkCreated(NetworkId)&apos;:
      // data[0] is networkId
      this.networks.add(data[0]);
      this.core.sendInitRequest(&apos;Network&apos;, String(data[0]));
      this.emit(&apos;network.new&apos;, data[0]);
      break;
    case &apos;2networkRemoved(NetworkId)&apos;:
      // data[0] is networkId
      this.networks.add(data[0]);
      this.networks.delete(data[0]);
      this.emit(&apos;network.remove&apos;, data[0]);
      break;
    case &apos;2identityCreated(Identity)&apos;:
      // data[0] is identity
      this.identities.set(data[0].identityId, new Identity(data[0]));
      this.emit(&apos;identity.new&apos;, data[0].identityId);
      break;
    case &apos;2identityRemoved(IdentityId)&apos;:
      // data[0] is identityId
      this.identities.delete(data[0]);
      this.emit(&apos;identity.remove&apos;, data[0]);
      break;
    default:
      logger(&apos;Unhandled RpcCall %s&apos;, functionName);
    }
  }

  /**
   * @protected
   */
  handleStructRpcCallDisplayMsg([ message ]) {
    const network = this.networks.get(message.bufferInfo.network);
    if (network) {
      const identity = this.identities.get(network.identityId);
      let buffer = network.buffers.get(message.bufferInfo.id);
      if (!buffer) {
        buffer = network.buffers.get(message.bufferInfo.name);
        if (buffer) {
          buffer.update(message.bufferInfo);
          network.buffers.move(buffer, message.bufferInfo.id);
        } else {
          buffer = new IRCBuffer(message.bufferInfo);
          this.networks.get(message.bufferInfo.network).buffers.add(buffer);
          this.emit(&apos;network.addbuffer&apos;, message.bufferInfo.network, message.bufferInfo.id);
        }
      }
      if (message.type === MessageTypes.NETSPLITJOIN) {
        // TODO
      } else if (message.type === MessageTypes.NETSPLITQUIT) {
        // TODO
      }

      const simpleMessage = buffer.addMessage(message);
      if (simpleMessage) {
        simpleMessage._updateFlags(network, identity, this.options.highlightmode);
        this.emit(&apos;buffer.message&apos;, message.bufferInfo.id, simpleMessage.id);
      }
    } else {
      logger(&apos;Network %d does not exists&apos;, message.bufferInfo.network);
    }
  }

  /**
   * @protected
   */
  handleStructRpcCall__objectRenamed__([ renamedSubject, oldSubject, newSubject ]) {
    renamedSubject = renamedSubject.toString();
    let networkId, newNick, oldNick;
    switch (renamedSubject) {
    case &apos;IrcUser&apos;:
      [ networkId, newNick ] = splitOnce(oldSubject, &apos;/&apos;); // 1/Nick
      networkId = parseInt(networkId, 10);
      [ , oldNick ] = splitOnce(newSubject, &apos;/&apos;); // 1/Nick_
      this.networks.get(networkId).renameUser(oldNick, newNick);
      this.emit(&apos;network.userrenamed&apos;, networkId, oldNick, newNick);
      break;
    default:
      logger(&apos;Unhandled RpcCall.__objectRenamed__ %s&apos;, renamedSubject);
    }
  }

  /**
   * @protected
   */
  handleStructInitData(className, id, [ data ]) {
    let network, bufferViewIds;
    switch (className) {
    case &apos;Network&apos;:
      network = this.handleInitDataNetwork(id, data);
      this.emit(&apos;network.init&apos;, network.networkId);
      break;
    case &apos;BufferSyncer&apos;:
      this.handleStructInitDataBufferSyncer(data);
      break;
    case &apos;IrcUser&apos;:
      this.handleStructInitDataIrcUser(id, data);
      break;
    case &apos;IrcChannel&apos;:
      this.handleStructInitDataIrcChannel(id, data);
      break;
    case &apos;BufferViewManager&apos;:
      ({ BufferViewIds: bufferViewIds } = data);
      for (let bufferViewId of bufferViewIds) {
        this.core.sendInitRequest(&apos;BufferViewConfig&apos;, bufferViewId);
      }
      this.emit(&apos;bufferview.ids&apos;, bufferViewIds);
      break;
    case &apos;BufferViewConfig&apos;:
      this.handleStructInitDataBufferViewConfig(id, data);
      break;
    case &apos;IgnoreListManager&apos;:
      this.ignoreList.import(data);
      this.emit(&apos;ignorelist&apos;, this.ignoreList);
      break;
    case &apos;AliasManager&apos;:
      this.aliases = alias.toArray(data);
      this.emit(&apos;aliases&apos;, this.aliases);
      break;
    case &apos;CoreInfo&apos;:
      this.coreData = data;
      this.emit(&apos;coreinfo&apos;, data);
      break;
    default:
      logger(&apos;Unhandled InitData %s&apos;, className);
    }
  }

  /**
   * @protected
   */
  handleStructInitDataBufferSyncer(data) {
    const { MarkerLines: markerLinesData, LastSeenMsg: lastSeenData } = data;
    if (lastSeenData) {
      for (let i=0; i&lt;lastSeenData.length; i+=2) {
        let bufferId = lastSeenData[i];
        let messageId = lastSeenData[i+1];
        if (this.networks.hasBuffer(bufferId)) {
          this.emit(&apos;buffer.lastseen&apos;, bufferId, messageId);
        } else {
          logger(&apos;Buffer #%d does not exists&apos;, bufferId);
        }
      }
    }
    if (markerLinesData) {
      for (let i=0; i&lt;markerLinesData.length; i+=2) {
        let bufferId = markerLinesData[i];
        let messageId = markerLinesData[i+1];
        if (this.networks.hasBuffer(bufferId)) {
          this.emit(&apos;buffer.markerline&apos;, bufferId, messageId);
        } else {
          logger(&apos;Buffer #%d does not exists&apos;, bufferId);
        }
      }
    }
  }

  /**
   * @protected
   */
  handleStructInitDataIrcChannel(id, data) {
    let [ networkId, bufferName ] = splitOnce(id, &apos;/&apos;);
    networkId = parseInt(networkId, 10);
    const buffer = this.networks.get(networkId).buffers.get(bufferName);
    buffer.topic = data.topic;
    buffer.isActive = true;
    this.emit(&apos;channel.topic&apos;, buffer.id, data.topic);
    this.emit(&apos;buffer.activate&apos;, buffer.id);
  }

  /**
   * @protected
   */
  handleStructInitDataIrcUser(id, data) {
    let [ networkId, nick ] = splitOnce(id, &apos;/&apos;);
    networkId = parseInt(networkId, 10);
    const user = this.networks.get(networkId).getUser(nick);
    if (user) {
      user.update(data);
      this.emit(&apos;network.adduser&apos;, networkId, nick);
    }
  }

  /**
   * @protected
   */
  handleStructInitDataBufferViewConfig(id, data) {
    id = parseInt(id, 10);
    this.bufferViews.set(id, new BufferView(id, data));
    for (let temporarilyRemovedBuffer of data.TemporarilyRemovedBuffers) {
      this.emit(&apos;bufferview.bufferhidden&apos;, id, temporarilyRemovedBuffer, &apos;temp&apos;);
    }
    for (let removedBuffer of data.RemovedBuffers) {
      this.emit(&apos;bufferview.bufferhidden&apos;, id, removedBuffer, &apos;perm&apos;);
    }
    this.emit(&apos;bufferview.orderchanged&apos;, id);
    this.emit(&apos;bufferview.init&apos;, id);
  }

  /**
   * @protected
   */
  handleStructSyncNetwork(id, functionName, [ data ]) {
    const network = this.networks.get(id);
    let nick, oldNick;
    if (!network) {
      logger(&apos;Uninitialized network %d. Ignoring %s&apos;, id, functionName);
      return;
    }
    switch (functionName) {
    case &apos;addIrcUser&apos;:
      network.addUser(new IRCUser(data));
      [ nick ] = data.split(&apos;!&apos;);
      this.core.sendInitRequest(&apos;IrcUser&apos;,  `${id}/${nick}`);
      break;
    case &apos;addIrcChannel&apos;:
      if (network.buffers.has(data)) {
        this.emit(&apos;network.addbuffer&apos;, id, network.buffers.get(data).id);
      } else {
        const ircbuffer = new IRCBuffer({ name: data, network: id });
        this.networks.get(ircbuffer.network).buffers.add(ircbuffer);
        this.emit(&apos;network.addbuffer&apos;, id, data);
      }
      this.core.sendInitRequest(&apos;IrcChannel&apos;, `${id}/${data}`);
      break;
    case &apos;setConnectionState&apos;:
      network.connectionState = data;
      this.emit(&apos;network.connectionstate&apos;, id, data);
      break;
    case &apos;setLatency&apos;:
      network.latency = data;
      this.emit(&apos;network.latency&apos;, id, data);
      break;
    case &apos;setConnected&apos;:
      network.isConnected = data;
      this.emit(data ? &apos;network.connected&apos; : &apos;network.disconnected&apos;, id);
      break;
    case &apos;setMyNick&apos;:
      oldNick = network.nick;
      network.nick = data;
      network.renameUser(oldNick, data);
      this.emit(&apos;network.userrenamed&apos;, id, oldNick, data);
      this.emit(&apos;network.mynick&apos;, id, data);
      break;
    case &apos;setNetworkName&apos;:
      network.networkName = data;
      this.emit(&apos;network.networkname&apos;, id, data);
      break;
    case &apos;setCurrentServer&apos;:
      network.currentServer = data;
      this.emit(&apos;network.server&apos;, id, data);
      break;
    case &apos;setServerList&apos;:
      network.ServerList = data;
      this.emit(&apos;network.serverlist&apos;, id, data);
      break;
    case &apos;setCodecForDecoding&apos;:
      network.codecForDecoding = data;
      this.emit(&apos;network.codec.decoding&apos;, id, data);
      break;
    case &apos;setCodecForEncoding&apos;:
      network.codecForEncoding = data;
      this.emit(&apos;network.codec.encoding&apos;, id, data);
      break;
    case &apos;setCodecForServer&apos;:
      network.codecForServer = data;
      this.emit(&apos;network.codec.server&apos;, id, data);
      break;
    case &apos;setPerform&apos;:
      network.perform = data;
      this.emit(&apos;network.perform&apos;, id, data);
      break;
    case &apos;setIdentity&apos;:
      network.identityId = data;
      this.emit(&apos;network.identity&apos;, id, data);
      break;
    case &apos;setAutoReconnectInterval&apos;:
      network.autoReconnectInterval = data;
      this.emit(&apos;network.autoreconnect.interval&apos;, id, data);
      break;
    case &apos;setAutoReconnectRetries&apos;:
      network.autoReconnectRetries = data;
      this.emit(&apos;network.autoreconnect.retries&apos;, id, data);
      break;
    case &apos;setAutoIdentifyService&apos;:
      network.autoIdentifyService = data;
      this.emit(&apos;network.autoidentify.service&apos;, id, data);
      break;
    case &apos;setAutoIdentifyPassword&apos;:
      network.autoIdentifyPassword = data;
      this.emit(&apos;network.autoidentify.password&apos;, id, data);
      break;
    case &apos;setUnlimitedReconnectRetries&apos;:
      network.unlimitedReconnectRetries = data;
      this.emit(&apos;network.unlimitedreconnectretries&apos;, id, data);
      break;
    case &apos;setUseSasl&apos;:
      network.useSasl = data;
      this.emit(&apos;network.usesasl&apos;, id, data);
      break;
    case &apos;setSaslAccount&apos;:
      network.saslAccount = data;
      this.emit(&apos;network.sasl.account&apos;, id, data);
      break;
    case &apos;setSaslPassword&apos;:
      network.saslPassword = data;
      this.emit(&apos;network.sasl.password&apos;, id, data);
      break;
    case &apos;setRejoinChannels&apos;:
      network.rejoinChannels = data;
      this.emit(&apos;network.rejoinchannels&apos;, id, data);
      break;
    case &apos;setUseCustomMessageRate&apos;:
      network.useCustomMessageRate = data;
      this.emit(&apos;network.usecustommessagerate&apos;, id, data);
      break;
    case &apos;setUnlimitedMessageRate&apos;:
      network.unlimitedMessageRate = data;
      this.emit(&apos;network.messagerate.unlimited&apos;, id, data);
      break;
    case &apos;setMessageRateDelay&apos;:
      network.msgRateMessageDelay = data;
      this.emit(&apos;network.messagerate.delay&apos;, id, data);
      break;
    case &apos;setMessageRateBurstSize&apos;:
      network.msgRateBurstSize = data;
      this.emit(&apos;network.messagerate.burstsize&apos;, id, data);
      break;
    default:
      logger(&apos;Unhandled Sync.Network %s&apos;, functionName);
    }
  }

  /**
   * @protected
   */
  handleStructSyncBufferSyncer(functionName, [ bufferId, data ]) {
    let bufferTo, bufferFrom;
    switch (functionName) {
    case &apos;markBufferAsRead&apos;:
      this.emit(&apos;buffer.read&apos;, bufferId);
      break;
    case &apos;setLastSeenMsg&apos;:
      // data is a messageId
      this.emit(&apos;buffer.lastseen&apos;, bufferId, data);
      break;
    case &apos;setMarkerLine&apos;:
      // data is a messageId
      this.emit(&apos;buffer.markerline&apos;, bufferId, data);
      break;
    case &apos;removeBuffer&apos;:
      this.networks.deleteBuffer(bufferId);
      this.emit(&apos;buffer.remove&apos;, bufferId);
      break;
    case &apos;renameBuffer&apos;:
      // data is the new name
      this.networks.getBuffer(bufferId).name = data;
      this.emit(&apos;buffer.rename&apos;, bufferId, data);
      break;
    case &apos;mergeBuffersPermanently&apos;:
      bufferTo = this.networks.getBuffer(bufferId);
      bufferFrom = this.networks.getBuffer(data);
      if (bufferTo &amp;&amp; bufferFrom) {
        for (const [ key, val ] of bufferFrom.messages) {
          val.buffer = bufferTo;
          bufferTo.messages.set(key, val);
        }
      }
      this.networks.deleteBuffer(bufferFrom);
      this.emit(&apos;buffer.merge&apos;, bufferTo, bufferFrom);
      break;
    default:
      logger(&apos;Unhandled Sync.BufferSyncer %s&apos;, functionName);
    }
  }

  /**
   * @protected
   */
  handleStructSyncBufferViewManager(functionName, [ data ]) {
    switch (functionName) {
    case &apos;addBufferViewConfig&apos;:
      // data is a bufferViewId
      this.core.sendInitRequest(&apos;BufferViewConfig&apos;, String(data));
      break;
    default:
      logger(&apos;Unhandled Sync.BufferViewManager %s&apos;, functionName);
    }
  }

  /**
   * @protected
   */
  handleStructSyncBufferViewConfig(id, functionName, data) {
    const bufferView = this.bufferViews.get(id);
    if (!bufferView) {
      logger(&apos;Uninitialized bufferView %d. Ignoring %s&apos;, id, functionName);
      return;
    }
    switch (functionName) {
    case &apos;addBuffer&apos;:
      bufferView.addBuffer(...data);
      bufferView.unhide(data[0]);
      this.emit(&apos;bufferview.bufferunhide&apos;, id, data[0]);
      this.emit(&apos;bufferview.orderchanged&apos;, id);
      break;
    case &apos;removeBuffer&apos;:
      bufferView.setTemporarilyRemoved(data[0]);
      this.emit(&apos;bufferview.bufferhidden&apos;, id, data[0], &apos;temp&apos;);
      break;
    case &apos;removeBufferPermanently&apos;:
      bufferView.setPermanentlyRemoved(data[0]);
      this.emit(&apos;bufferview.bufferhidden&apos;, id, data[0], &apos;perm&apos;);
      break;
    case &apos;moveBuffer&apos;:
      bufferView.moveBuffer(...data);
      this.emit(&apos;bufferview.orderchanged&apos;, id);
      break;
    case &apos;setNetworkId&apos;:
      [ bufferView.networkId ] = data;
      this.emit(&apos;bufferview.networkid&apos;, id, bufferView.networkId);
      break;
    case &apos;setShowSearch&apos;:
      [ bufferView.showSearch ] = data;
      this.emit(&apos;bufferview.search&apos;, id, bufferView.showSearch);
      break;
    case &apos;setHideInactiveNetworks&apos;:
      [ bufferView.hideInactiveNetworks ] = data;
      this.emit(&apos;bufferview.hideinactivenetworks&apos;, id, bufferView.hideInactiveNetworks);
      break;
    case &apos;setHideInactiveBuffers&apos;:
      [ bufferView.hideInactiveBuffers ] = data;
      this.emit(&apos;bufferview.hideinactivebuffers&apos;, id, bufferView.hideInactiveBuffers);
      break;
    case &apos;setAllowedBufferTypes&apos;:
      [ bufferView.allowedBufferTypes ] = data;
      this.emit(&apos;bufferview.allowedbuffertypes&apos;, id, bufferView.allowedBufferTypes);
      break;
    case &apos;setAddNewBuffersAutomatically&apos;:
      [ bufferView.addNewBuffersAutomatically ] = data;
      this.emit(&apos;bufferview.addnewbuffersautomatically&apos;, id, bufferView.addNewBuffersAutomatically);
      break;
    case &apos;setMinimumActivity&apos;:
      [ bufferView.minimumActivity ] = data;
      this.emit(&apos;bufferview.minimumactivity&apos;, id, bufferView.minimumActivity);
      break;
    case &apos;setBufferViewName&apos;:
      [ bufferView.bufferViewName ] = data;
      this.emit(&apos;bufferview.bufferviewname&apos;, id, bufferView.bufferViewName);
      break;
    case &apos;setDisableDecoration&apos;:
      [ bufferView.disableDecoration ] = data;
      this.emit(&apos;bufferview.disabledecoration&apos;, id, bufferView.disableDecoration);
      break;
    case &apos;update&apos;:
      bufferView.update(data[0]);
      this.emit(&apos;bufferview.update&apos;, id, data[0]);
      break;
    default:
      logger(&apos;Unhandled Sync.BufferViewConfig %s&apos;, functionName);
    }
  }

  /**
   * @protected
   */
  handleStructSyncIrcUser(networkId, username, functionName, [ data ]) {
    const network = this.networks.get(networkId);
    let user, buffer, ids;
    if (!network) {
      logger(&apos;Uninitialized network %d. Ignoring %s&apos;, networkId, functionName);
      return;
    }
    switch (functionName) {
    case &apos;partChannel&apos;:
      // data is bufferName
      buffer = network.buffers.get(data);
      buffer.removeUser(username);
      this.emit(&apos;user.part&apos;, networkId, username, buffer.id);
      if (buffer.isChannel) {
        if (network.nick !== null &amp;&amp; network.nick.toLowerCase() === username.toLowerCase()) {
          // We part
          buffer.active = false;
          this.emit(&apos;buffer.deactivate&apos;, buffer.id);
        }
      } else if (buffer.name === username) {
        buffer.active = false;
        this.emit(&apos;buffer.deactivate&apos;, buffer.id);
      }
      break;
    case &apos;quit&apos;:
      ids = network.deleteUser(username);
      for (let id of ids) {
        this.emit(&apos;buffer.deactivate&apos;, id);
      }
      this.emit(&apos;user.quit&apos;, networkId, username);
      break;
    case &apos;setNick&apos;:
      // Already handled by RPC call
      break;
    /*case &quot;setServer&quot;:
      // TODO
      break;*/
    case &apos;setAway&apos;:
      // data is isAway
      user = network.getUser(username);
      if (user) {
        user.away = data;
        this.emit(&apos;user.away&apos;, networkId, username, data);
      }
      break;
    case &apos;setRealName&apos;:
      // data is realname
      user = network.getUser(username);
      if (user) {
        user.realname = data;
        this.emit(&apos;user.realname&apos;, networkId, username, data);
      }
      break;
    default:
      logger(&apos;Unhandled Sync.IrcUser %s&apos;, functionName);
    }
  }

  /**
   * @protected
   */
  handleStructSyncIrcChannel(networkId, buffername, functionName, data) {
    const network = this.networks.get(networkId);
    if (!network) {
      logger(&apos;Uninitialized network %d. Ignoring %s&apos;, networkId, functionName);
      return;
    }
    const buffer = network.buffers.get(buffername);
    if (!buffer) {
      logger(&apos;Uninitialized buffer %s. Ignoring %s&apos;, buffername, functionName);
      return;
    }
    let user, nick, mode;
    switch (functionName) {
    case &apos;joinIrcUsers&apos;:
      for (let i=0; i &lt; data[0].length; i++) {
        user = network.getUser(data[0][i]); // nick
        buffer.addUser(user, data[1][i]); // modes
        this.emit(&apos;channel.join&apos;, buffer.id, data[0][i]);
      }
      break;
    case &apos;addUserMode&apos;:
      [ nick, mode ] = data;
      user = network.getUser(nick);
      buffer.addUserMode(user, mode);
      this.emit(&apos;channel.addusermode&apos;, buffer.id, nick, mode);
      break;
    case &apos;removeUserMode&apos;:
      [ nick, mode ] = data;
      user = network.getUser(nick);
      buffer.removeUserMode(user, mode);
      this.emit(&apos;channel.removeusermode&apos;, buffer.id, nick, mode);
      break;
    case &apos;setTopic&apos;:
      [ buffer.topic ] = data;
      this.emit(&apos;channel.topic&apos;, buffer.id, buffer.topic);
      break;
    default:
      logger(&apos;Unhandled Sync.IrcChannel %s&apos;, functionName);
    }
  }

  /**
   * @protected
   */
  handleStructSyncBacklogManager(functionName, [ bufferId, _first, _last, _maxAmount, _, data ]) {
    const messageIds = [];
    let buffer, network, identity, message;
    switch (functionName) {
    case &apos;receiveBacklog&apos;:
      buffer = this.networks.getBuffer(bufferId);
      network = this.networks.get(buffer.network);
      identity = this.identities.get(network.identityId);
      if (buffer) {
        for (let rawmessage of data) {
          message = buffer.addMessage(rawmessage);
          if (!message) {
            logger(&apos;Message %d already exists in buffer %d&apos;, rawmessage.id, buffer.id);
          } else {
            messageIds.push(message.id);
            message._updateFlags(network, identity, this.options.highlightmode);
          }
        }
        this.emit(&apos;buffer.backlog&apos;, bufferId, messageIds);
      } else {
        logger(&apos;Buffer %d does not exists.&apos;, bufferId);
      }
      break;
    default:
      logger(&apos;Unhandled Sync.BacklogManager %s&apos;, functionName);
    }
  }

  /**
   * @protected
   */
  handleStructSyncIgnoreListManager(functionName, [ data ]) {
    switch (functionName) {
    case &apos;update&apos;:
      this.ignoreList.import(data);
      this.emit(&apos;ignorelist&apos;, this.ignoreList);
      break;
    default:
      logger(&apos;Unhandled Sync.IgnoreListManager %s&apos;, functionName);
    }
  }

  /**
   * @protected
   */
  handleStructSyncIdentity(id, functionName, [ data ]) {
    const identity = this.identities.get(id);
    if (identity) {
      if (functionName.indexOf(&apos;set&apos;) === 0) {
        let key = functionName.substring(3);
        key = key.charAt(0).toLowerCase() + key.slice(1);
        identity[key] = data;
        this.emit(`identity.${key.toLowerCase()}`, id, data);
      } else {
        logger(&apos;Unhandled Sync.Identity %s&apos;, functionName);
      }
    } else {
      logger(&apos;Unknown Identity %d&apos;, id);
    }
  }

  /**
   * @protected
   */
  handleStructSyncAliasManager(functionName, [ data ]) {
    switch (functionName) {
    case &apos;update&apos;:
      this.aliases = alias.toArray(data);
      this.emit(&apos;aliases&apos;, this.aliases);
      break;
    default:
      logger(&apos;Unhandled Sync.AliasManager %s&apos;, functionName);
    }
  }

  /**
   * Setup core
   * @param {string} backend
   * @param {string} adminuser
   * @param {string} adminpassword
   * @param {Object} [properties={}]
   */
  setupCore(backend, adminuser, adminpassword, properties = {}) {
    this.core.setupCore(backend, adminuser, adminpassword, properties);
  }

  /**
   * Login to core
   */
  login() {
    this.loginCallback((user, password) =&gt; this.core.login(user, password));
  }

  /**
   * Connect to the core
   * @param {net.Duplex} duplex
   */
  connect(duplex) {
    this.core.init(duplex);
    this.core.connect();
  }

  /**
   * Disconnect the client from the core
   */
  disconnect() {
    clearInterval(this.heartbeatInterval);
    this.core.disconnect();
  }
}

/**
 * This event is fired when quasselcore information are received
 * @typedef {Event} Event:coreinfoinit
 * @property {Object} data
 * @property {boolean} data.Configured - Is the core configured
 * @property {number} data.CoreFeatures
 * @property {String} data.CoreInfo
 * @property {boolean} data.LoginEnabled
 * @property {boolean} data.MsgType - Is always &quot;ClientInitAck&quot;
 * @property {number} data.ProtocolVersion
 * @property {Array} [data.StorageBackends]
 * @property {boolean} data.SupportSsl
 * @property {boolean} data.SupportsCompression
 */
/**
 * This event is fired upon successful login
 * @typedef {Event} Event:login
 */
/**
 * This event is fired upon unsuccessful login
 * @typedef {Event} Event:loginfailed
 */
/**
 * This event is fired upon successful session initialization
 * @typedef {Event} Event:init
 * @property {Object} obj
 */
/**
 * This event is fired when {@link Identity} objects are first initialized
 * @typedef {Event} Event:identities.init
 * @property {Map&lt;number, Identity&gt;} identities
 */
/**
 * This event is fired when a buffer is added to a network
 * @typedef {Event} Event:network.addbuffer
 * @property {number} networkId
 * @property {number|String} bufferId
 */
/**
 * Network latency value
 * @typedef {Event} Event:network.latency
 * @property {number} networkId
 * @property {number} value
 */
/**
 * Network connection state
 * @typedef {Event} Event:network.connectionstate
 * @property {number} networkId
 * @property {number} connectionState
 */
/**
 * This event is fired when a network state is switched to connected
 * @typedef {Event} Event:network.connected
 * @property {number} networkId
 */
/**
 * This event is fired when a network state is switched to disconnected
 * @typedef {Event} Event:network.disconnected
 * @property {number} networkId
 */
/**
 * This event is fired when a user is renamed on a network
 * @typedef {Event} Event:network.userrenamed
 * @property {number} networkId
 * @property {String} oldNick
 * @property {String} nick
 */
/**
 * This event is fired when current connected user is renamed on a network
 * @typedef {Event} Event:network.mynick
 * @property {number} networkId
 * @property {String} nick
 */
/**
 * This event is fired when the name of a network changes
 * @typedef {Event} Event:network.networkname
 * @property {number} networkId
 * @property {String} networkName
 */
/**
 * This event is fired when the server on which a network is connected changes
 * @typedef {Event} Event:network.server
 * @property {number} networkId
 * @property {String} server
 */
/**
 * This event is fired when a network server list is updated
 * @typedef {Event} Event:network.serverlist
 * @property {number} networkId
 * @property {Object[]} serverlist
 */
/**
 * Fired when encoding for sent messages has changed
 * @typedef {Event} Event:network.codec.decoding
 * @property {number} networkId
 * @property {String} codec
 */
/**
 * Fired when encoding for received messages has changed
 * @typedef {Event} Event:network.codec.encoding
 * @property {number} networkId
 * @property {String} codec
 */
/**
 * Fired when server encoding has changed
 * @typedef {Event} Event:network.codec.server
 * @property {number} networkId
 * @property {String} codec
 */
/**
 * Fired when the list of commands to perform on connection to a server has changed
 * @typedef {Event} Event:network.perform
 * @property {number} networkId
 * @property {String[]} commands
 */
/**
 * Fired when the network identity changed
 * @typedef {Event} Event:network.identity
 * @property {number} networkId
 * @property {number} identityId
 */
/**
 * Fired when interval value for reconnecting to the network changed
 * @typedef {Event} Event:network.autoreconnect.interval
 * @property {number} networkId
 * @property {number} interval
 */
/**
 * Fired when retries value for reconnecting to the network changed
 * @typedef {Event} Event:network.autoreconnect.retries
 * @property {number} networkId
 * @property {number} retries
 */
/**
 * Fired when auto identify service changed
 * @typedef {Event} Event:network.autoidentify.service
 * @property {number} networkId
 * @property {String} service
 */
/**
 * Fired when auto identify service password changed
 * @typedef {Event} Event:network.autoidentify.password
 * @property {number} networkId
 * @property {String} password
 */
/**
 * Fired when Unlimited reconnect retries value has changed
 * @typedef {Event} Event:network.unlimitedreconnectretries
 * @property {number} networkId
 * @property {boolean} unlimitedreconnectretries
 */
/**
 * Fired when Use Sasl value has changed
 * @typedef {Event} Event:network.usesasl
 * @property {number} networkId
 * @property {boolean} usesasl
 */
/**
 * Fired when Sasl account has changed
 * @typedef {Event} Event:network.sasl.account
 * @property {number} networkId
 * @property {String} account
 */
/**
 * Fired when Sasl account password has changed
 * @typedef {Event} Event:network.sasl.password
 * @property {number} networkId
 * @property {String} password
 */
/**
 * Fired when Rejoin Channels value has changed
 * @typedef {Event} Event:network.rejoinchannels
 * @property {number} networkId
 * @property {boolean} rejoinchannels
 */
/**
 * Fired when Use Custom Message Rate value has changed
 * @typedef {Event} Event:network.usecustommessagerate
 * @property {number} networkId
 * @property {boolean} usecustommessagerate
 */
/**
 * Fired when Unlimited Message Rate Burst Size value has changed
 * @typedef {Event} Event:network.messagerate.unlimited
 * @property {number} networkId
 * @property {boolean} unlimited
 */
/**
 * Fired when Message Rate Burst Size value has changed
 * @typedef {Event} Event:network.messagerate.burstsize
 * @property {number} networkId
 * @property {number} burstsize
 */
/**
 * Fired when Message Rate Delay value has changed
 * @typedef {Event} Event:network.messagerate.delay
 * @property {number} networkId
 * @property {number} delay
 */
/**
 * Buffer has been marked as read
 * @typedef {Event} Event:buffer.read
 * @property {number} bufferId
 */
/**
 * Buffer&apos;s last seen message updated
 * @typedef {Event} Event:buffer.lastseen
 * @property {number} bufferId
 * @property {number} messageId
 */
/**
 * Buffer&apos;s markeline attached to a message
 * @typedef {Event} Event:buffer.markerline
 * @property {number} bufferId
 * @property {number} messageId
 */
/**
 * Buffer has been removed
 * @typedef {Event} Event:buffer.remove
 * @property {number} bufferId
 */
/**
 * Buffer has been renamed
 * @typedef {Event} Event:buffer.rename
 * @property {number} bufferId
 */
/**
 * bufferId2 has been merged into bufferId1
 * @typedef {Event} Event:buffer.merge
 * @property {number} bufferId1
 * @property {number} bufferId2
 */
/**
 * Buffer&apos;s hidden state removed
 * @typedef {Event} Event:bufferview.bufferunhide
 * @property {number} bufferViewId
 * @property {number} bufferId
 */
/**
 * Buffer&apos;s hidden state set
 * @typedef {Event} Event:bufferview.bufferhidden
 * @property {number} bufferViewId
 * @property {number} bufferId
 * @property {String} type Either &quot;temp&quot; or &quot;perm&quot;
 */
/**
 * Buffer set as inactive
 * @typedef {Event} Event:buffer.deactivate
 * @property {number} bufferId
 */
/**
 * User has left a channel
 * @typedef {Event} Event:user.part
 * @property {number} networkId
 * @property {String} nick
 * @property {number} bufferId
 */
/**
 * User has left a network
 * @typedef {Event} Event:user.quit
 * @property {number} networkId
 * @property {String} nick
 */
/**
 * User away state changed
 * @typedef {Event} Event:user.away
 * @property {number} networkId
 * @property {String} nick
 * @property {boolean} isAway
 */
/**
 * User realname changed
 * @typedef {Event} Event:user.realname
 * @property {number} networkId
 * @property {String} nick
 * @property {String} realname
 */
/**
 * User joined a channel
 * @typedef {Event} Event:channel.join
 * @property {number} bufferId
 * @property {String} nick
 */
/**
 * User mode has been added
 * @typedef {Event} Event:channel.addusermode
 * @property {number} bufferId
 * @property {String} nick
 * @property {String} mode
 */
/**
 * User mode has been removed
 * @typedef {Event} Event:channel.removeusermode
 * @property {number} bufferId
 * @property {String} nick
 * @property {String} mode
 */
/**
 * Channel topic changed
 * @typedef {Event} Event:channel.topic
 * @property {number} bufferId
 * @property {String} topic
 */
/**
 * Core information
 * @typedef {Event} Event:coreinfo
 * @property {Object} data
 */
/**
 * {@link IRCBuffer} activated
 * @typedef {Event} Event:buffer.activate
 * @property {number} bufferId
 */
/**
 * Backlogs received
 * @typedef {Event} Event:buffer.backlog
 * @property {number} bufferId
 * @property {number[]} messageIds
 */
/**
 * {@link IRCMessage} received on a buffer
 * @typedef {Event} Event:buffer.message
 * @property {number} bufferId
 * @property {number} messageId
 */
/**
 * Buffers order changed
 * @typedef {Event} Event:bufferview.orderchanged
 * @property {number} bufferViewId
 */
/**
 * {@link BufferView} manager init request received
 * @typedef {Event} Event:bufferview.ids
 * @property {number[]} ids
 */
/**
 * {@link BufferView} initialized
 * @typedef {Event} Event:bufferview.init
 * @property {number} bufferViewId
 */
/**
 * {@link BufferView} networkId updated
 * @typedef {Event} Event:bufferview.networkid
 * @property {number} bufferViewId
 * @property {number} networkId
 */
/**
 * {@link BufferView} search updated
 * @typedef {Event} Event:bufferview.search
 * @property {number} bufferViewId
 * @property {boolean} search
 */
/**
 * {@link BufferView} hideInactiveNetworks updated
 * @typedef {Event} Event:bufferview.hideinactivenetworks
 * @property {number} bufferViewId
 * @property {boolean} hideinactivenetworks
 */
/**
 * {@link BufferView} hideInactiveBuffers updated
 * @typedef {Event} Event:bufferview.hideinactivebuffers
 * @property {number} bufferViewId
 * @property {boolean} hideinactivebuffers
 */
/**
 * {@link BufferView} allowedBufferTypes updated
 * @typedef {Event} Event:bufferview.allowedbuffertypes
 * @property {number} bufferViewId
 * @property {number} allowedbuffertypes
 */
/**
 * {@link BufferView} addNewBuffersAutomatically updated
 * @typedef {Event} Event:bufferview.addnewbuffersautomatically
 * @property {number} bufferViewId
 * @property {boolean} addnewbuffersautomatically
 */
/**
 * {@link BufferView} minimumActivity updated
 * @typedef {Event} Event:bufferview.minimumactivity
 * @property {number} bufferViewId
 * @property {boolean} minimumactivity
 */
/**
 * {@link BufferView} bufferViewName updated
 * @typedef {Event} Event:bufferview.bufferviewname
 * @property {number} bufferViewId
 * @property {String} bufferviewname
 */
/**
 * {@link BufferView} disableDecoration updated
 * @typedef {Event} Event:bufferview.disabledecoration
 * @property {number} bufferViewId
 * @property {boolean} disabledecoration
 */
/**
 * {@link BufferView} object updated
 * @typedef {Event} Event:bufferview.update
 * @property {number} bufferViewId
 * @property {object} data
 */
/**
 * {@link IgnoreList} updated
 * @typedef {Event} Event:ignorelist
 */
/**
 * {@link Identity} updated
 * @typedef {Event} Event:identity
 */
/**
 * New {@link Identity} created
 * @typedef {Event} Event:identity.new
 * @property {number} identityId
 */
/**
 * {@link Identity} removed
 * @typedef {Event} Event:identity.remove
 * @property {number} identityId
 */
/**
 * User connected to the {@link Network}
 * @typedef {Event} Event:network.adduser
 * @property {number} networkId
 * @property {String} nick
 */
/**
 * New {@link Network} created
 * @typedef {Event} Event:network.new
 * @property {number} networkId
 */
/**
 * {@link Network} removed
 * @typedef {Event} Event:network.remove
 * @property {number} networkId
 */
/**
 * {@link Network} is ready
 * @typedef {Event} Event:network.init
 * @property {number} networkId
 */
/**
 * Aliases updated
 * @typedef {Event} Event:aliases
 */
/**
 * This event is fired when the core needs to be setup
 * @typedef {Event} Event:setup
 * @property {Object[]} backends - List of available storage backends
 * @property {String} backends[].DisplayName - Storage backends name
 * @property {String} backends[].Description - Storage backends description
 * @property {String[]} backends[].SetupKeys - Keys that will need a corresponding value to configure chosen storage backend
 * @property {Object} backends[].SetupDefaults - Defaults values for corresponding SetupKeys
 */
/**
 * This event is fired if the setup of the core was successful
 * @typedef {Event} Event:setupok
 */
/**
 * This event is fired if the setup of the core has failed
 * @typedef {Event} Event:setupfailed
 * @property {Object} error - The reason of the failure
 */
/**
 * This event is fired if an unhandled message is received
 * @typedef {Event} Event:unhandled
 * @property {Object} obj
 */
/**
 * An error occured
 * @typedef {Event} Event:error
 * @property {Object} error
 */

function splitOnce(str, character) {
  const i = str.indexOf(character);
  return [ str.slice(0, i), str.slice(i+1) ];
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
