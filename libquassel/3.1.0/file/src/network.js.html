<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/network.js | libquassel</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Javascript lib to connect and interact with Quassel IRC core"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="libquassel"><meta property="twitter:description" content="Javascript lib to connect and interact with Quassel IRC core"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/alias.js~AliasItem.html">AliasItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/buffer.js~IRCBuffer.html">IRCBuffer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/buffer.js~IRCBufferCollection.html">IRCBufferCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/buffer.js~IRCBufferUser.html">IRCBufferUser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/bufferview.js~BufferView.html">BufferView</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/highlight.js~HighlightRule.html">HighlightRule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/highlight.js~HighlightRuleManager.html">HighlightRuleManager</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/identity.js~Identity.html">Identity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ignore.js~IgnoreItem.html">IgnoreItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ignore.js~IgnoreList.html">IgnoreList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/libquassel.js~Client.html">Client</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/message.js~IRCMessage.html">IRCMessage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/network.js~Network.html">Network</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/network.js~NetworkCollection.html">NetworkCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/network.js~Server.html">Server</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/request.js~Core.html">Core</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/user.js~IRCUser.html">IRCUser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/websocket.js~WebSocketStream.html">WebSocketStream</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-toArray">toArray</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-toCoreObject">toCoreObject</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Types">Types</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-HighlightNickType">HighlightNickType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Serializable">Serializable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-IgnoreTypes">IgnoreTypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ScopeTypes">ScopeTypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-StrictnessTypes">StrictnessTypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EventEmitter">EventEmitter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Features">Features</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Flags">Flags</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-HighlightModes">HighlightModes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Types">Types</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ConnectionStates">ConnectionStates</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Types">Types</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-BufferInfo">BufferInfo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:aliases">Event:aliases</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.activate">Event:buffer.activate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.activity">Event:buffer.activity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.backlog">Event:buffer.backlog</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.deactivate">Event:buffer.deactivate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.lastseen">Event:buffer.lastseen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.markerline">Event:buffer.markerline</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.merge">Event:buffer.merge</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.message">Event:buffer.message</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.read">Event:buffer.read</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.remove">Event:buffer.remove</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:buffer.rename">Event:buffer.rename</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.addnewbuffersautomatically">Event:bufferview.addnewbuffersautomatically</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.allowedbuffertypes">Event:bufferview.allowedbuffertypes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.bufferhidden">Event:bufferview.bufferhidden</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.bufferunhide">Event:bufferview.bufferunhide</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.bufferviewname">Event:bufferview.bufferviewname</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.disabledecoration">Event:bufferview.disabledecoration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.hideinactivebuffers">Event:bufferview.hideinactivebuffers</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.hideinactivenetworks">Event:bufferview.hideinactivenetworks</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.ids">Event:bufferview.ids</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.init">Event:bufferview.init</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.minimumactivity">Event:bufferview.minimumactivity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.networkid">Event:bufferview.networkid</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.orderchanged">Event:bufferview.orderchanged</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.search">Event:bufferview.search</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:bufferview.update">Event:bufferview.update</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:channel.addusermode">Event:channel.addusermode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:channel.join">Event:channel.join</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:channel.removeusermode">Event:channel.removeusermode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:channel.topic">Event:channel.topic</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:coreinfo">Event:coreinfo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:coreinfoinit">Event:coreinfoinit</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:error">Event:error</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:highlightrules">Event:highlightrules</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:identities.init">Event:identities.init</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:identity">Event:identity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:identity.new">Event:identity.new</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:identity.remove">Event:identity.remove</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:ignorelist">Event:ignorelist</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:init">Event:init</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:login">Event:login</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:loginfailed">Event:loginfailed</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.addbuffer">Event:network.addbuffer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.adduser">Event:network.adduser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.autoidentify.password">Event:network.autoidentify.password</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.autoidentify.service">Event:network.autoidentify.service</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.autoreconnect.interval">Event:network.autoreconnect.interval</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.autoreconnect.retries">Event:network.autoreconnect.retries</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.codec.decoding">Event:network.codec.decoding</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.codec.encoding">Event:network.codec.encoding</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.codec.server">Event:network.codec.server</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.connected">Event:network.connected</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.connectionstate">Event:network.connectionstate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.disconnected">Event:network.disconnected</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.identity">Event:network.identity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.init">Event:network.init</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.latency">Event:network.latency</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.messagerate.burstsize">Event:network.messagerate.burstsize</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.messagerate.delay">Event:network.messagerate.delay</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.messagerate.unlimited">Event:network.messagerate.unlimited</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.mynick">Event:network.mynick</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.networkname">Event:network.networkname</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.new">Event:network.new</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.perform">Event:network.perform</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.rejoinchannels">Event:network.rejoinchannels</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.remove">Event:network.remove</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.sasl.account">Event:network.sasl.account</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.sasl.password">Event:network.sasl.password</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.server">Event:network.server</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.serverlist">Event:network.serverlist</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.unlimitedreconnectretries">Event:network.unlimitedreconnectretries</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.usecustommessagerate">Event:network.usecustommessagerate</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.userrenamed">Event:network.userrenamed</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:network.usesasl">Event:network.usesasl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:setup">Event:setup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:setupfailed">Event:setupfailed</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:setupok">Event:setupok</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:unhandled">Event:unhandled</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:user.away">Event:user.away</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:user.part">Event:user.part</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:user.quit">Event:user.quit</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Event:user.realname">Event:user.realname</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-loginCallback">loginCallback</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;BufferId&gt;">UserType&lt;BufferId&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;BufferInfo&gt;">UserType&lt;BufferInfo&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;Identity&gt;">UserType&lt;Identity&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;IdentityId&gt;">UserType&lt;IdentityId&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;Message&gt;">UserType&lt;Message&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;MsgId&gt;">UserType&lt;MsgId&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;Network::Server&gt;">UserType&lt;Network::Server&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;NetworkId&gt;">UserType&lt;NetworkId&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;NetworkId&gt;">UserType&lt;NetworkId&gt;</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-UserType&lt;NetworkInfo&gt;">UserType&lt;NetworkInfo&gt;</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/network.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/*
 * libquassel
 * https://github.com/magne4000/node-libquassel
 *
 * Copyright (c) 2017 Jo&#xEB;l Charles
 * Licensed under the MIT license.
 */

const { EventEmitter } = require(&apos;events&apos;);
const logger = require(&apos;debug&apos;)(&apos;libquassel:network&apos;);
const { util, types: qtypes, serialization: { Serializable, serialize } } = require(&apos;qtdatastream&apos;);

import IRCUser from &apos;./user&apos;;
import { IRCBufferCollection } from &apos;./buffer&apos;;

/**
 * @type {Object}
 * @property {number} ConnectionStates.DISCONNECTED
 * @property {number} ConnectionStates.CONNECTING
 * @property {number} ConnectionStates.INITIALIZING
 * @property {number} ConnectionStates.INITIALIZED
 * @property {number} ConnectionStates.RECONNECTING
 * @property {number} ConnectionStates.DISCONNECTING
 */
export const ConnectionStates = {
  DISCONNECTED: 0x00,
  CONNECTING: 0x01,
  INITIALIZING: 0x02,
  INITIALIZED: 0x03,
  RECONNECTING: 0x04,
  DISCONNECTING: 0x05
};

function setter(fn) {
  return function(aclass, key, descriptor) {
    if (!aclass.hasOwnProperty(&apos;__values&apos;)) {
      Object.defineProperty(aclass, &apos;__values&apos;, {
        enumerable: false,
        writable: false,
        configurable: false,
        value: {}
      });
    }
    Object.assign(descriptor, {
      enumerable: true,
      get: function() {
        return this.__values[key];
      },
      set: function(value) {
        this.__values[key] = fn(value);
      }
    });
    return descriptor;
  };
}

/**
 * A server as used in {@link Network}
 * @implements {Serializable}
 */
@Serializable(&apos;Network::Server&apos;)
export class Server {
  /** @type {string} */
  @serialize(qtypes.QString, &apos;Host&apos;)
  host;

  @serialize(qtypes.QUInt, &apos;Port&apos;)
  port = 6667;

  @serialize(qtypes.QString, &apos;Password&apos;)
  password = &apos;&apos;;

  @serialize(qtypes.QBool, &apos;UseSSL&apos;)
  useSSL = false;

  @serialize(qtypes.QBool, &apos;UseProxy&apos;)
  useProxy = false;

  @serialize(qtypes.QInt, &apos;ProxyType&apos;)
  proxyType = 0;

  @serialize(qtypes.QString, &apos;ProxyHost&apos;)
  proxyHost = &apos;&apos;;

  @serialize(qtypes.QUInt, &apos;ProxyPort&apos;)
  proxyPort = 8080;

  @serialize(qtypes.QString, &apos;ProxyUser&apos;)
  proxyUser = &apos;&apos;;

  @serialize(qtypes.QString, &apos;ProxyPass&apos;)
  proxyPass = &apos;&apos;;

  @serialize(qtypes.QBool)
  sslVerify = false;

  @serialize(qtypes.QInt)
  sslVersion = 0;

  constructor(args) {
    Object.assign(this, args);
  }
}

function toStr(s) {
  return Buffer.isBuffer(s) ? util.str(s) : s;
}

/**
 * Quassel Network
 * @implements {Serializable}
 */
@Serializable(&apos;NetworkInfo&apos;)
export class Network extends EventEmitter {

  /** @type {number} */
  @serialize(qtypes.QUserType.get(&apos;NetworkId&apos;), &apos;NetworkId&apos;)
  get networkId() {
    return this.id;
  }

  /** @type {number} */
  set networkId(value) {
    this.id = value;
  }

  /** @type {string} */
  @serialize(qtypes.QString, &apos;NetworkName&apos;)
  get networkName() {
    return this.name;
  }

  /** @type {string} */
  set networkName(value) {
    this.name = value;
  }

  /** @type {number} */
  @serialize(qtypes.QUserType.get(&apos;IdentityId&apos;), &apos;Identity&apos;)
  identityId;

  /** @type {string} */
  @setter(toStr)
  @serialize(qtypes.QByteArray, &apos;CodecForServer&apos;)
  codecForServer = null;

  /** @type {string} */
  @setter(toStr)
  @serialize(qtypes.QByteArray, &apos;CodecForEncoding&apos;)
  codecForEncoding = null;

  /** @type {string} */
  @setter(toStr)
  @serialize(qtypes.QByteArray, &apos;CodecForDecoding&apos;)
  codecForDecoding = null;

  @serialize(qtypes.QList.of(Server), &apos;ServerList&apos;)
  ServerList = [];

  @serialize(qtypes.QBool, &apos;UseRandomServer&apos;)
  useRandomServer = false;

  @serialize(qtypes.QStringList, &apos;Perform&apos;)
  perform = [];

  @serialize(qtypes.QBool, &apos;UseAutoIdentify&apos;)
  useAutoIdentify = false;

  @serialize(qtypes.QString, &apos;AutoIdentifyService&apos;)
  autoIdentifyService = &apos;NickServ&apos;;

  @serialize(qtypes.QString, &apos;AutoIdentifyPassword&apos;)
  autoIdentifyPassword = &apos;&apos;;

  @serialize(qtypes.QBool, &apos;UseSasl&apos;)
  useSasl = false;

  @serialize(qtypes.QString, &apos;SaslAccount&apos;)
  saslAccount = &apos;&apos;;

  @serialize(qtypes.QString, &apos;SaslPassword&apos;)
  saslPassword = &apos;&apos;;

  @serialize(qtypes.QBool, &apos;UseAutoReconnect&apos;)
  useAutoReconnect = true;

  @serialize(qtypes.QUInt, &apos;AutoReconnectInterval&apos;)
  autoReconnectInterval = 60;

  @serialize(qtypes.QUInt, &apos;AutoReconnectRetries&apos;)
  autoReconnectRetries = 20;

  @serialize(qtypes.QBool, &apos;UnlimitedReconnectRetries&apos;)
  unlimitedReconnectRetries = false;

  @serialize(qtypes.QBool, &apos;RejoinChannels&apos;)
  rejoinChannels = true;

  @serialize(qtypes.QBool, &apos;UseCustomMessageRate&apos;)
  useCustomMessageRate = false;

  @serialize(qtypes.QBool, &apos;UnlimitedMessageRate&apos;)
  unlimitedMessageRate = false;

  @serialize(qtypes.QUInt, &apos;MessageRateDelay&apos;)
  msgRateMessageDelay = 2200;

  @serialize(qtypes.QUInt, &apos;MessageRateBurstSize&apos;)
  msgRateBurstSize = 5;

  /** @type {string} */
  set myNick(value) {
    this.nick = value;
  }

  /** @type {string} */
  get myNick() {
    return this._nick;
  }

  /** @type {string} */
  set nick(value) {
    this._nick = value;
    this.nickRegex = value.replace(/([.?*+^$[\]\\(){}|-])/g, &apos;\\$1&apos;);
  }

  /** @type {string} */
  get nick() {
    return this._nick;
  }

  /** @type {boolean} */
  set isConnected(connected) {
    connected = Boolean(connected);
    if (this.statusBuffer) {
      this.statusBuffer.isActive = connected;
    }
    this._isConnected = connected;
  }

  /** @type {boolean} */
  get isConnected() {
    return this._isConnected;
  }

  constructor(id, name = null) {
    super();
    this._isConnected = false;
    this._nick = null;
    this.id = typeof id === &apos;number&apos; ? id : -1;
    /** @type {IRCBufferCollection} */
    this.buffers = new IRCBufferCollection();
    /** @type {Map&lt;String, IRCUser&gt;} */
    this.users = new Map;
    /** @type {boolean} */
    this.open = false;
    /** @type {number} */
    this.connectionState = ConnectionStates.DISCONNECTED;
    /** @type {number} */
    this.latency = 0;
    /** @type {?IRCBuffer} */
    this.statusBuffer = null;
    this.nickRegex = null;
    this.name = name;
  }

  getUser(nick) {
    return this.users.get(nick);
  }

  /**
   * Add given user to the network
   * @param {IRCUser} user
   */
  addUser(user) {
    this.users.set(user.nick, user);
  }

  /**
   * Returns `true` if the specified nick/{@link IRCUser} exists in the network, `false` otherwise
   * @param {string|IRCUser} nick
   * @returns {boolean}
   */
  hasUser(nick) {
    return this.users.has(typeof nick.nick === &apos;string&apos; ? nick.nick : nick);
  }

  /**
   * Replace `oldNick` by `newNick` in current network and buffers
   * @param {string} oldNick
   * @param {string} newNick
   */
  renameUser(oldNick, newNick) {
    const user = this.users.get(oldNick);
    if (user) {
      user.nick = newNick;
      this.users.set(newNick, user);
      this.users.delete(oldNick);
      for (let buffer of this.buffers.values()) {
        if (buffer.isChannel &amp;&amp; buffer.hasUser(oldNick)) {
          buffer.updateUserMaps(oldNick);
        }
      }
    }
  }

  /**
   * Delete the user identified by `nick` from the network and buffers
   * @param {string} nick
   * @returns {number[]} list of buffer ids that has been deactivated
   */
  deleteUser(nick) {
    const ids = [];
    for (let buffer of this.buffers.values()) {
      if (buffer.isChannel) {
        if (buffer.hasUser(nick)) {
          buffer.removeUser(nick);
          if (this.nick &amp;&amp; this.nick.toLowerCase() === nick.toLowerCase()) {
            buffer.isActive = false;
            ids.push(buffer.id);
          }
        }
      } else if (buffer.name === nick) {
        buffer.isActive = false;
        ids.push(buffer.id);
      }
    }
    this.users.delete(nick);
    return ids;
  }

  /**
   * @param {IRCUser[]} userlist
   */
  updateUsers(userlist) {
    this.users.clear();
    if (Array.isArray(userlist) &amp;&amp; userlist.length&gt; 0) {
      for (let user of userlist) {
        this.users.set(user.nick, user);
      }
    }
  }

  /**
   * Get the {IRCBuffer} corresponding to specified id or name
   * @param {number|string} bufferId
   */
  getBuffer(bufferId) {
    return this.buffers.get(bufferId);
  }

  /**
   * Returns `true` if a buffer exists with corresponding id or name
   * @param {number|string} bufferId
   */
  hasBuffer(bufferId) {
    return this.buffers.has(bufferId);
  }

  /**
   * This method is used internally by update method
   * @protected
   * @param {Object} uac
   */
  @serialize(qtypes.QMap, &apos;IrcUsersAndChannels&apos;)
  set ircUsersAndChannels(uac) {
    // Create IRCUsers and attach them to network
    for (let user of Object.values(uac.users)) {
      this.addUser(new IRCUser(user));
    }
    // If there is a buffer corresponding to a nick, activate the buffer
    for (let buffer of this.buffers.values()) {
      if (!buffer.isChannel &amp;&amp; !buffer.isStatusBuffer &amp;&amp; this.hasUser(buffer.name)) {
        buffer.isActive = true;
      }
    }
    // Attach channels to network
    let channel, nick, user;
    for (let key of Object.keys(uac.channels)) {
      channel = this.getBuffer(key);
      // Then attach users to channels
      for (nick in uac.channels[key].UserModes) {
        user = this.getUser(nick);
        if (user) {
          channel.addUser(user, uac.channels[key].UserModes[nick]);
        } else {
          logger(&apos;User %s have not been found on server&apos;, nick);
        }
      }
    }
  }

  update(data) {
    Object.assign(this, data);
  }

  toString() {
    return `&lt;Network ${this.id} ${this.name}&gt;`;
  }
}

/**
 * Map of {@link Network}, with helpers
 */
export class NetworkCollection extends Map {
  /**
   * Add an empty {@linkNetwork} identified by `networkId` to the collection
   * @param {number} networkId
   * @returns {module:network.Network}
   */
  add(networkId) {
    networkId = parseInt(networkId, 10);
    const network = new Network(networkId);
    this.set(networkId, network);
    return network;
  }

  /**
   * Returns {@link IRCBuffer} corresponding to given `bufferId`, or `undefined` otherwise
   * @param {number} bufferId
   * @returns {?IRCBuffer}
   */
  getBuffer(bufferId) {
    if (typeof bufferId !== &apos;number&apos;) return undefined;
    let buffer;
    for (let network of this.values()) {
      buffer = network.buffers.get(bufferId);
      if (buffer) return buffer;
    }
    return undefined;
  }

  /**
   * Delete the {@link IRCBuffer} object identified by `bufferId` from the networks
   * @param {number} bufferId
   */
  deleteBuffer(bufferId) {
    if (typeof bufferId !== &apos;number&apos;) {
      logger(&apos;deleteBuffer:%O is not a number&apos;, bufferId);
      return;
    }
    const buffer = this.getBuffer(bufferId);
    if (buffer) {
      this.get(buffer.network).buffers.delete(bufferId);
    }
  }

  /**
   * Yields all buffers of all networks
   */
  *buffers() {
    for (let network of this.values()) {
      for (let buffer of network.buffers.values()) {
        yield buffer;
      }
    }
  }

  /**
   * Returns `true` if buffer identified by `bufferId` exists
   * @param {number} bufferId
   */
  hasBuffer(bufferId) {
    if (typeof bufferId !== &apos;number&apos;) {
      logger(&apos;hasBuffer:%O is not a number&apos;, bufferId);
      return false;
    }
    for (let network of this.values()) {
      if (network.hasBuffer(bufferId)) return true;
    }
    return false;
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
