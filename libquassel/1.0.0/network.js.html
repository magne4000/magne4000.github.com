<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>network.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-buffer.IRCBuffer.html">IRCBuffer</a><ul class='methods'><li data-type='method'><a href="module-buffer.IRCBuffer.html#addMessage">addMessage</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#addUser">addUser</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#addUserMode">addUserMode</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#devour">devour</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#getBufferInfo">getBufferInfo</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#getFirstMessage">getFirstMessage</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#getLastMessage">getLastMessage</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#hasMode">hasMode</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#hasUser">hasUser</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isChannel">isChannel</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isHidden">isHidden</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isLast">isLast</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isOp">isOp</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isStatusBuffer">isStatusBuffer</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isVoiced">isVoiced</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#removeUser">removeUser</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#removeUserMode">removeUserMode</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#setActive">setActive</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#setName">setName</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#setOrder">setOrder</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#setPermanentlyRemoved">setPermanentlyRemoved</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#setTemporarilyRemoved">setTemporarilyRemoved</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#updateUserMaps">updateUserMaps</a></li></ul></li><li><a href="module-buffer.IRCBufferCollection.html">IRCBufferCollection</a><ul class='methods'><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#_computeFilteredBuffers">_computeFilteredBuffers</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#_isBufferFiltered">_isBufferFiltered</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#addBuffer">addBuffer</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#getBuffer">getBuffer</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#hasBuffer">hasBuffer</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#moveBuffer">moveBuffer</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#removeBuffer">removeBuffer</a></li></ul></li><li><a href="module-glouton.Glouton.html">Glouton</a><ul class='methods'><li data-type='method'><a href="module-glouton.Glouton.html#.extend">extend</a></li><li data-type='method'><a href="module-glouton.Glouton.html#devour">devour</a></li></ul></li><li><a href="module-identity.html">identity</a><ul class='methods'><li data-type='method'><a href="module-identity.html#devour">devour</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayEnabled">setAutoAwayEnabled</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayReason">setAutoAwayReason</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayReasonEnabled">setAutoAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayTime">setAutoAwayTime</a></li><li data-type='method'><a href="module-identity.html#setAwayNick">setAwayNick</a></li><li data-type='method'><a href="module-identity.html#setAwayNickEnabled">setAwayNickEnabled</a></li><li data-type='method'><a href="module-identity.html#setAwayReason">setAwayReason</a></li><li data-type='method'><a href="module-identity.html#setAwayReasonEnabled">setAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayEnabled">setDetachAwayEnabled</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayReason">setDetachAwayReason</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayReasonEnabled">setDetachAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setId">setId</a></li><li data-type='method'><a href="module-identity.html#setIdent">setIdent</a></li><li data-type='method'><a href="module-identity.html#setIdentityName">setIdentityName</a></li><li data-type='method'><a href="module-identity.html#setKickReason">setKickReason</a></li><li data-type='method'><a href="module-identity.html#setNicks">setNicks</a></li><li data-type='method'><a href="module-identity.html#setPartReason">setPartReason</a></li><li data-type='method'><a href="module-identity.html#setQuitReason">setQuitReason</a></li><li data-type='method'><a href="module-identity.html#setRealName">setRealName</a></li><li data-type='method'><a href="module-identity.html#update">update</a></li></ul></li><li><a href="module-ignore.IgnoreItem.html">IgnoreItem</a><ul class='methods'><li data-type='method'><a href="module-ignore.IgnoreItem.html#matchIgnore">matchIgnore</a></li><li data-type='method'><a href="module-ignore.IgnoreItem.html#matchScope">matchScope</a></li><li data-type='method'><a href="module-ignore.IgnoreItem.html#revived">revived</a></li></ul></li><li><a href="module-ignore.IgnoreList.html">IgnoreList</a><ul class='methods'><li data-type='method'><a href="module-ignore.IgnoreList.html#export">export</a></li><li data-type='method'><a href="module-ignore.IgnoreList.html#import">import</a></li><li data-type='method'><a href="module-ignore.IgnoreList.html#matches">matches</a></li></ul></li><li><a href="module-libquassel-Quassel.html">Quassel</a><ul class='methods'><li data-type='method'><a href="module-libquassel-Quassel.html#connect">connect</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#createBuffer">createBuffer</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#createIdentity">createIdentity</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#createNetwork">createNetwork</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#disconnect">disconnect</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#dispatch">dispatch</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#getMaxBufferId">getMaxBufferId</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#getNetworks">getNetworks</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#getNetworksMap">getNetworksMap</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#handleInitDataNetwork">handleInitDataNetwork</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#handleMsgType">handleMsgType</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#handleStruct">handleStruct</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#heartBeat">heartBeat</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#init">init</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#login">login</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#removeIdentity">removeIdentity</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#removeNetwork">removeNetwork</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestBacklog">requestBacklog</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestBacklogs">requestBacklogs</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestConnectNetwork">requestConnectNetwork</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestDisconnectNetwork">requestDisconnectNetwork</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestHideBufferPermanently">requestHideBufferPermanently</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestHideBufferTemporarily">requestHideBufferTemporarily</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestMarkBufferAsRead">requestMarkBufferAsRead</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestMergeBuffersPermanently">requestMergeBuffersPermanently</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestRemoveBuffer">requestRemoveBuffer</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestSetLastMsgRead">requestSetLastMsgRead</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestSetMarkerLine">requestSetMarkerLine</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestSetNetworkInfo">requestSetNetworkInfo</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestUnhideBuffer">requestUnhideBuffer</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestUpdateIdentity">requestUpdateIdentity</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestUpdateIgnoreListManager">requestUpdateIgnoreListManager</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#sendClientInfo">sendClientInfo</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#sendInitRequest">sendInitRequest</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#sendMessage">sendMessage</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#setupCore">setupCore</a></li></ul></li><li><a href="module-message.IRCMessage.html">IRCMessage</a><ul class='methods'><li data-type='method'><a href="module-message.IRCMessage.html#_updateFlags">_updateFlags</a></li><li data-type='method'><a href="module-message.IRCMessage.html#getHostmask">getHostmask</a></li><li data-type='method'><a href="module-message.IRCMessage.html#getNick">getNick</a></li><li data-type='method'><a href="module-message.IRCMessage.html#isHighlighted">isHighlighted</a></li><li data-type='method'><a href="module-message.IRCMessage.html#isSelf">isSelf</a></li></ul></li><li><a href="module-network.Network.html">Network</a><ul class='methods'><li data-type='method'><a href="module-network.Network.html#.toQ">toQ</a></li><li data-type='method'><a href="module-network.Network.html#addUser">addUser</a></li><li data-type='method'><a href="module-network.Network.html#devour">devour</a></li><li data-type='method'><a href="module-network.Network.html#getBuffer">getBuffer</a></li><li data-type='method'><a href="module-network.Network.html#getBufferCollection">getBufferCollection</a></li><li data-type='method'><a href="module-network.Network.html#getBufferMap">getBufferMap</a></li><li data-type='method'><a href="module-network.Network.html#getStatusBuffer">getStatusBuffer</a></li><li data-type='method'><a href="module-network.Network.html#getUserByNick">getUserByNick</a></li><li data-type='method'><a href="module-network.Network.html#hasNick">hasNick</a></li><li data-type='method'><a href="module-network.Network.html#removeUser">removeUser</a></li><li data-type='method'><a href="module-network.Network.html#renameUser">renameUser</a></li><li data-type='method'><a href="module-network.Network.html#setConnected">setConnected</a></li><li data-type='method'><a href="module-network.Network.html#setIrcUsersAndChannels">setIrcUsersAndChannels</a></li><li data-type='method'><a href="module-network.Network.html#setLatency">setLatency</a></li><li data-type='method'><a href="module-network.Network.html#setMyNick">setMyNick</a></li><li data-type='method'><a href="module-network.Network.html#setName">setName</a></li><li data-type='method'><a href="module-network.Network.html#setServer">setServer</a></li><li data-type='method'><a href="module-network.Network.html#setStatusBuffer">setStatusBuffer</a></li><li data-type='method'><a href="module-network.Network.html#setUserList">setUserList</a></li><li data-type='method'><a href="module-network.Network.html#updateTopic">updateTopic</a></li></ul></li><li><a href="module-network.NetworkCollection.html">NetworkCollection</a><ul class='methods'><li data-type='method'><a href="module-network.NetworkCollection.html#add">add</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#delete">delete</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#findBuffer">findBuffer</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#get">get</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#removeBuffer">removeBuffer</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#set">set</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#values">values</a></li></ul></li><li><a href="module-user.html">user</a><ul class='methods'><li data-type='method'><a href="module-user.html#devour">devour</a></li><li data-type='method'><a href="module-user.html#setAway">setAway</a></li><li data-type='method'><a href="module-user.html#setEncrypted">setEncrypted</a></li><li data-type='method'><a href="module-user.html#setLastAwayMessage">setLastAwayMessage</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-buffer.html">buffer</a></li><li><a href="module-glouton.html">glouton</a></li><li><a href="module-identity.html">identity</a><ul class='methods'><li data-type='method'><a href="module-identity.html#devour">devour</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayEnabled">setAutoAwayEnabled</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayReason">setAutoAwayReason</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayReasonEnabled">setAutoAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayTime">setAutoAwayTime</a></li><li data-type='method'><a href="module-identity.html#setAwayNick">setAwayNick</a></li><li data-type='method'><a href="module-identity.html#setAwayNickEnabled">setAwayNickEnabled</a></li><li data-type='method'><a href="module-identity.html#setAwayReason">setAwayReason</a></li><li data-type='method'><a href="module-identity.html#setAwayReasonEnabled">setAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayEnabled">setDetachAwayEnabled</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayReason">setDetachAwayReason</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayReasonEnabled">setDetachAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setId">setId</a></li><li data-type='method'><a href="module-identity.html#setIdent">setIdent</a></li><li data-type='method'><a href="module-identity.html#setIdentityName">setIdentityName</a></li><li data-type='method'><a href="module-identity.html#setKickReason">setKickReason</a></li><li data-type='method'><a href="module-identity.html#setNicks">setNicks</a></li><li data-type='method'><a href="module-identity.html#setPartReason">setPartReason</a></li><li data-type='method'><a href="module-identity.html#setQuitReason">setQuitReason</a></li><li data-type='method'><a href="module-identity.html#setRealName">setRealName</a></li><li data-type='method'><a href="module-identity.html#update">update</a></li></ul></li><li><a href="module-ignore.html">ignore</a></li><li><a href="module-libquassel.html">libquassel</a></li><li><a href="module-message.html">message</a></li><li><a href="module-network.html">network</a></li><li><a href="module-requesttype.html">requesttype</a></li><li><a href="module-user.html">user</a><ul class='methods'><li data-type='method'><a href="module-user.html#devour">devour</a></li><li data-type='method'><a href="module-user.html#setAway">setAway</a></li><li data-type='method'><a href="module-user.html#setEncrypted">setEncrypted</a></li><li data-type='method'><a href="module-user.html#setLastAwayMessage">setLastAwayMessage</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.activate%2522">event:"buffer.activate"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.backlog%2522">event:"buffer.backlog"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.deactivate%2522">event:"buffer.deactivate"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.hidden%2522">event:"buffer.hidden"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.lastseen%2522">event:"buffer.lastseen"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.markerline%2522">event:"buffer.markerline"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.merge%2522">event:"buffer.merge"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.message%2522">event:"buffer.message"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.order%2522">event:"buffer.order"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.read%2522">event:"buffer.read"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.remove%2522">event:"buffer.remove"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.rename%2522">event:"buffer.rename"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.unhide%2522">event:"buffer.unhide"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522channel.addusermode%2522">event:"channel.addusermode"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522channel.join%2522">event:"channel.join"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522channel.removeusermode%2522">event:"channel.removeusermode"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522channel.topic%2522">event:"channel.topic"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522coreinfo%2522">event:"coreinfo"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522coreinfoinit%2522">event:"coreinfoinit"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522error%2522">event:"error"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522identities.init%2522">event:"identities.init"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522identity.new%2522">event:"identity.new"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522identity.remove%2522">event:"identity.remove"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522identity%2522">event:"identity"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522ignorelist%2522">event:"ignorelist"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522init%2522">event:"init"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522login%2522">event:"login"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522loginfailed%2522">event:"loginfailed"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.addbuffer%2522">event:"network.addbuffer"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.adduser%2522">event:"network.adduser"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.connected%2522">event:"network.connected"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.connectionstate%2522">event:"network.connectionstate"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.disconnected%2522">event:"network.disconnected"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.init%2522">event:"network.init"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.latency%2522">event:"network.latency"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.mynick%2522">event:"network.mynick"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.networkname%2522">event:"network.networkname"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.new%2522">event:"network.new"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.remove%2522">event:"network.remove"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.server%2522">event:"network.server"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.userrenamed%2522">event:"network.userrenamed"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522setup%2522">event:"setup"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522setupfailed%2522">event:"setupfailed"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522setupok%2522">event:"setupok"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522user.away%2522">event:"user.away"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522user.part%2522">event:"user.part"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522user.quit%2522">event:"user.quit"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522user.realname%2522">event:"user.realname"</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">network.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * libquassel
 * https://github.com/magne4000/node-libquassel
 *
 * Copyright (c) 2016 Joël Charles
 * Licensed under the MIT license.
 */

/** @module network */

var Glouton = require('./glouton'),
    IRCUser = require('./user'),
    IRCBufferCollection = require('./buffer').IRCBufferCollection,
    logger = require('debug')('libquassel:network'),
    qtdatastream = require('qtdatastream');

/**
 * @class
 * @alias module:network.Network
 * @augments module:glouton.Glouton
 * @param {number} networkId
 */
var Network = function Network(networkId) {
    this.networkId = networkId;
    this.buffers = new IRCBufferCollection();
    this.users = new Map; // Map&lt;String, IrcUser>
    this.open = false;
    this.connectionState = Network.ConnectionState.Disconnected;
    this.isConnected = false;
    this.latency = 0;
    this.statusBuffer = null;
    this.networkName = null;
    this.nick = null;
    this.server = null;
};

Glouton.extend(Network);

/**
 * @class
 * @alias module:network.NetworkCollection
 */
var NetworkCollection = function NetworkCollection() {
    this.hm = new Map;
};

/**
 * Add and empty {@link module:network.Network} identified by `networkid` to the collection
 * @param {number} networkid
 * @returns {module:network.Network}
 */
NetworkCollection.prototype.add = function(networkid) {
    networkid = parseInt(networkid, 10);
    var network = new Network(networkid);
    this.hm.set(networkid, network);
    return network;
};

/**
 * Add a {@link module:network.Network} Object to the collection
 * @param {number} networkid
 * @param {module:network.Network} network
 * @returns {module:network.Network} the same network object as the one in params
 */
NetworkCollection.prototype.set = function(networkid, network) {
    networkid = parseInt(networkid, 10);
    this.hm.set(networkid, network);
    return network;
};

/**
 * Get the {@link module:network.Network} Object identified by `networkid`
 * @param {number} networkid
 * @returns {?module:network.Network}
 */
NetworkCollection.prototype.get = function(networkid) {
    networkid = parseInt(networkid, 10);
    return this.hm.get(networkid);
};

/**
 * Delete the {@link module:network.Network} Object identified by `networkid` from the collection
 * @param {number} networkid
 */
NetworkCollection.prototype.delete = function(networkid) {
    networkid = parseInt(networkid, 10);
    this.hm.delete(networkid);
};

/**
 * Returns {@link module:buffer.IRCBuffer} corresponding to given `bufferId`, or `null` otherwise
 * @param {number} bufferId
 * @returns {?module:buffer.IRCBuffer}
 */
NetworkCollection.prototype.findBuffer = function(bufferId) {
    if (typeof bufferId !== "number") return null;
    var networks = this.hm.values(), network, buffer;
    network = networks.next();
    while(!network.done) {
        buffer = network.value.getBufferCollection().getBuffer(bufferId);
        if (buffer) return buffer;
        network = networks.next();
    }
    return null;
};

/**
 * Delete the {@link module:buffer.IRCBuffer} Object identified by `bufferId` from the networks
 * @param {number} bufferId
 */
NetworkCollection.prototype.removeBuffer = function(bufferId) {
    var buffer = this.findBuffer(bufferId);
    if (buffer !== null) {
        this.get(buffer.network).getBufferCollection().removeBuffer(bufferId);
    }
};

/**
 * Returns `Iterator` over {@link module:network.Network} of this collection
 * @returns {Iterator.&lt;module:network.Network>}
 */
NetworkCollection.prototype.values = function() {
    return this.hm.values();
};

/**
 * @alias module:network.Network.ConnectionState
 * @readonly
 * @enum {number}
 * @default
 */
Network.ConnectionState = {
    Disconnected: 0,
    Connecting: 1,
    Initializing: 2,
    Initialized: 3,
    Reconnecting: 4,
    Disconnecting: 5
};

/**
 * Set network name
 * @param {string} networkName
 */
Network.prototype.setName = function(networkName) {
    this.networkName = networkName;
    this.updateTopic();
};

/**
 * Affects `userList` parameter to internal `users` Map
 * @param {module:user[]} userList
 */
Network.prototype.setUserList = function(userList) {
    var i;
    this.users.clear();
    if (userList !== null &amp;&amp; userList.length> 0) {
        for (i=0; i&lt;userList.length; i++) {
            this.users.set(userList[i].nick, userList[i]);
        }
    }
};

/**
 * Set my network nick
 * @param {string} nick
 */
Network.prototype.setMyNick = function(nick) {
    this.nick = nick;
};

/**
 * Replace `oldNick` by `newNick` in current network and buffers
 * @param {string} oldNick
 * @param {string} newNick
 */
Network.prototype.renameUser = function(oldNick, newNick) {
    var user = this.getUserByNick(oldNick);
    if (user !== null) {
        user.nick = newNick;
        this.users.set(newNick, user);
        this.users.delete(oldNick);
        this.getBufferMap().forEach(function(buffer){
            if (buffer.isChannel() &amp;&amp; buffer.hasUser(oldNick)) {
                buffer.updateUserMaps(oldNick);
            }
        });
    }
};

/**
 * Add given user to the network
 * @param {module:user} user
 */
Network.prototype.addUser = function(user) {
    this.users.set(user.nick, user);
};

/**
 * @callback removeUserCallback
 * @param {module:buffer.IRCBuffer} buffer
 */

/**
 * Remove the user identified by `nick` from the network and buffers
 * @param {string} nick
 * @param {?removeUserCallback} cb
 */
Network.prototype.removeUser = function(nick, cb) {
    // remove user from channels
    // and disable user buffer
    var ircuser = this.getUserByNick(nick);
    this.getBufferMap().forEach(function(buffer){
        if (buffer.isChannel() &amp;&amp; buffer.hasUser(ircuser)) {
            buffer.removeUser(ircuser);
        }
        if (typeof activeCallback === 'function') {
            cb(buffer);
        }
    });
    this.users.delete(nick);
};

/**
 * Returns true if the specified nick exists in the network, false otherwise
 * @param {string} nick
 * @returns {boolean}
 */
Network.prototype.hasNick = function(nick) {
    return this.users.has(nick);
};

/**
 * Returns the {@link module:user} identified by the specified nick
 * @param {string} nick
 * @returns {?module:user}
 */
Network.prototype.getUserByNick = function(nick) {
    return this.users.get(nick) || null;
};

/**
 * Update `isConnected` value, and change the state of the `statusBuffer` of this network
 * @param {boolean} connected
 */
Network.prototype.setConnected = function(connected) {
    if (connected) {
        //this.setOpen(true);
        if (this.statusBuffer !== null) {
            this.statusBuffer.setActive(true);
        }
    } else {
        //this.setOpen(false);
        if (this.statusBuffer !== null) {
            this.statusBuffer.setActive(false);
        }
        /* TODO
        for (Buffer buffer : buffers.getRawBufferList()) {
            buffer.setActive(false);
        }
        */
    }
    this.isConnected = connected;
};

/**
 * Called by `devour` method. This method updates internal user and buffer Maps
 * @param {Object} uac
 */
Network.prototype.setIrcUsersAndChannels = function(uac) {
    var key, user, channel, nick, self=this;
    
    // Create IRCUsers and attach them to network
    for (key in uac.users) {
        user = new IRCUser(key, uac.users[key]);
        this.users.set(user.nick, user);
    }
    // If there is a buffer corresponding to a nick, activate the buffer
    this.getBufferMap().forEach(function(value){
        if (self.users.has(value.name)) {
            value.setActive(true);
        }
    });
    // Create Channels and attach them to network
    for (key in uac.channels) {
        channel = this.getBuffer(key);
        //Then attach users to channels
        for (nick in uac.channels[key].UserModes) {
            user = this.getUserByNick(nick);
            if (user !== null) {
                channel.addUser(user, uac.channels[key].UserModes[nick]);
            } else {
                logger("User " + nick + " have not been found on server.");
            }
        }
    }
};

/**
 * Update latency
 * @param {number} latency
 */
Network.prototype.setLatency = function(latency) {
    this.latency = latency;
};

/**
 * Update server
 * @param {string} server
 */
Network.prototype.setServer = function(server) {
    this.server = server;
};

/**
 * Actually set empty topic for statusBuffer, otherwise it does nothing
 */
Network.prototype.updateTopic = function() {
    if (this.statusBuffer !== null) {
        this.statusBuffer.setTopic("");
    }
};

/**
 * Set current statusBuffer for this network
 * @param {module:buffer.IRCBuffer} statusBuffer
 */
Network.prototype.setStatusBuffer = function(statusBuffer) {
    this.statusBuffer = statusBuffer;
};

/**
 * Returns statusBuffer of this network
 * @returns {module:buffer.IRCBuffer}
 */
Network.prototype.getStatusBuffer = function() {
    return this.statusBuffer;
};

/**
 * Returns current network buffers as {@link module:buffer.IRCBufferCollection}
 * @returns {module:buffer.IRCBufferCollection}
 */
Network.prototype.getBufferCollection = function() {
    return this.buffers;
};

/**
 * Returns current network buffers as {@link Map.&lt;number, module:buffer.IRCBuffer>}
 * @returns {Map.&lt;number, module:buffer.IRCBuffer>}
 */
Network.prototype.getBufferMap = function() {
    return this.buffers.buffers;
};

/**
 * Get the {module:buffer.IRCBuffer} corresponding to specified ID or name
 * @param {(number|string)} ind
 */
Network.prototype.getBuffer = function(ind) {
    return this.buffers.getBuffer(ind);
};

/**
 * Transform a given network object to an Object representation prepared for QDataStream injection
 * @param {Network} network
 * @returns {object}
 */
Network.toQ = function(network) {
    var jServerList = [];
    for (var i = 0; i &lt; network.ServerList.length; i++) {
        jServerList.push(new qtdatastream.QUserType("Network::Server", {
            Host: new qtdatastream.QString(network.ServerList[i].Host),
            Port: new qtdatastream.QUInt(network.ServerList[i].Port),
            Password: new qtdatastream.QString(network.ServerList[i].Password),
            UseSSL: new qtdatastream.QBool(network.ServerList[i].UseSSL),
            sslVersion: new qtdatastream.QInt(network.ServerList[i].sslVersion),
            UseProxy: new qtdatastream.QBool(network.ServerList[i].UseProxy),
            ProxyType: new qtdatastream.QInt(network.ServerList[i].ProxyType),
            ProxyHost: new qtdatastream.QString(network.ServerList[i].ProxyHost),
            ProxyPort: new qtdatastream.QUInt(network.ServerList[i].ProxyPort),
            ProxyUser: new qtdatastream.QString(network.ServerList[i].ProxyUser),
            ProxyPass: new qtdatastream.QString(network.ServerList[i].ProxyPass)
        }));
    }
    var jNetwork = {
        NetworkId: new qtdatastream.QUserType("NetworkId", network.networkId),
        NetworkName: new qtdatastream.QString(network.networkName),
        Identity: new qtdatastream.QUserType("IdentityId", network.identityId),
        CodecForServer: new qtdatastream.QByteArray(network.codecForServer),
        CodecForEncoding: new qtdatastream.QByteArray(network.codecForEncoding),
        CodecForDecoding: new qtdatastream.QByteArray(network.codecForDecoding),
        ServerList: new qtdatastream.QList(jServerList),
        UseRandomServer: new qtdatastream.QBool(network.useRandomServer),
        Perform: new qtdatastream.QStringList(network.perform),
        UseAutoIdentify: new qtdatastream.QBool(network.useAutoIdentify),
        AutoIdentifyService: new qtdatastream.QString(network.autoIdentifyService),
        AutoIdentifyPassword: new qtdatastream.QString(network.autoIdentifyPassword),
        UseSasl: new qtdatastream.QBool(network.useSasl),
        SaslAccount: new qtdatastream.QString(network.saslAccount),
        SaslPassword: new qtdatastream.QString(network.saslPassword),
        UseAutoReconnect: new qtdatastream.QBool(network.useAutoReconnect),
        AutoReconnectInterval: new qtdatastream.QUInt(network.autoReconnectInterval),
        AutoReconnectRetries: new qtdatastream.QUInt(network.autoReconnectRetries),
        UnlimitedReconnectRetries: new qtdatastream.QBool(network.unlimitedReconnectRetries),
        RejoinChannels: new qtdatastream.QBool(network.rejoinChannels)
    };
    return new qtdatastream.QUserType("NetworkInfo", jNetwork);
};

exports.Network = Network;
exports.NetworkCollection = NetworkCollection;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed Mar 23 2016 16:23:38 GMT+0100 (CET) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
